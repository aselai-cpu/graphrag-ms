<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4467px" preserveAspectRatio="none" style="width:2399px;height:4467px;" version="1.1" viewBox="0 0 2399 4467" width="2399px" zoomAndPan="magnify"><defs><filter height="300%" id="f10em7rw6yd21k" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="405" x="993.75" y="29.4023">GraphRAG Index Operation - Standard Method</text><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3940.8105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="264.5" y="154.998"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3882.1895" style="stroke:#A80036;stroke-width:1.0;" width="10" x="548.5" y="184.3086"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3684.3262" style="stroke:#A80036;stroke-width:1.0;" width="10" x="799.5" y="352.8613"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="460.4082" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1043.5" y="483.1035"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3027.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1220.5" y="980.8223"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1364.5" y="424.4824"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="122.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1058.4434"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="113.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1258.3066"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1444.1699"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="481.624" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1617.7227"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="172.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2184.623"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="117.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2454.1074"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="183.5186" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2650.9707"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2919.7656"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="271.7607" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="3093.3184"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="332.3818" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="3450.3555"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1742.6201"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1838.207"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1910.8281"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1969.4492"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="2483.418"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="3244.8369"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="3626.1846"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2128.5" y="3704.4609"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="417.0977" style="stroke:#000000;stroke-width:2.0;" width="514" x="977.5" y="498.1035"/><rect fill="#FFFFFF" height="207.3711" style="stroke:none;stroke-width:1.0;" width="514" x="977.5" y="707.8301"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="191.1738" style="stroke:#000000;stroke-width:2.0;" width="783.5" x="1563" y="1691.3438"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="486.5" x="1573" y="1799.5859"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="163.8633" style="stroke:#000000;stroke-width:2.0;" width="880" x="1179.5" y="2415.4863"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="186.4844" style="stroke:#000000;stroke-width:2.0;" width="809.5" x="1573" y="3108.3184"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="191.1738" style="stroke:#000000;stroke-width:2.0;" width="779.5" x="1563" y="3550.5977"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="101.2422" style="stroke:#000000;stroke-width:2.0;" width="759.5" x="1573" y="3574.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="269.5" x2="269.5" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="553" x2="553" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="804" x2="804" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1048.5" x2="1048.5" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1225.5" x2="1225.5" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1369" x2="1369" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1627" x2="1627" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1989.5" x2="1989.5" y1="123.6875" y2="4382.7773"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2133.5" x2="2133.5" y1="123.6875" y2="4382.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="120.7344">User</text><ellipse cx="23.5" cy="50.1992" fill="#FEFECE" filter="url(#f10em7rw6yd21k)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,58.1992 L23.5,85.1992 M10.5,66.1992 L36.5,66.1992 M23.5,85.1992 L10.5,100.1992 M23.5,85.1992 L36.5,100.1992 " fill="none" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="4395.3125">User</text><ellipse cx="23.5" cy="4408.2656" fill="#FEFECE" filter="url(#f10em7rw6yd21k)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,4416.2656 L23.5,4443.2656 M10.5,4424.2656 L36.5,4424.2656 M23.5,4443.2656 L10.5,4458.2656 M23.5,4443.2656 L36.5,4458.2656 " fill="none" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="78" x="228.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="257" y="92.2461">CLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="235.5" y="108.7344">(main.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="78" x="228.5" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="257" y="4402.3125">CLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="235.5" y="4418.8008">(main.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="83" x="510" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="521.5" y="92.2461">IndexCLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="517" y="108.7344">(index.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="83" x="510" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="521.5" y="4402.3125">IndexCLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="517" y="4418.8008">(index.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="111" x="747" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="791.5" y="92.2461">API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="754" y="108.7344">(api/index.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="111" x="747" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="791.5" y="4402.3125">API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="754" y="4418.8008">(api/index.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="118" x="987.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="994.5" y="92.2461">PipelineFactory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1008" y="108.7344">(factory.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="118" x="987.5" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="994.5" y="4402.3125">PipelineFactory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1008" y="4418.8008">(factory.py)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="68" x="1189.5" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1196.5" y="108.7344">Pipeline</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="68" x="1189.5" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1196.5" y="4402.3125">Pipeline</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="1334" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1341" y="108.7344">Storage</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="67" x="1334" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1341" y="4402.3125">Storage</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1583" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1590" y="108.7344">Workflows</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1583" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1590" y="4402.3125">Workflows</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1929.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="1974.5" y="92.2461">LLM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1936.5" y="108.7344">(graphrag_llm)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1929.5" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="1974.5" y="4402.3125">LLM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1936.5" y="4418.8008">(graphrag_llm)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2059.5" y="71.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="2091.5" y="92.2461">VectorStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2066.5" y="108.7344">(graphrag_vectors)</text><rect fill="#FEFECE" filter="url(#f10em7rw6yd21k)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2059.5" y="4381.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="2091.5" y="4402.3125">VectorStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2066.5" y="4418.8008">(graphrag_vectors)</text><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3940.8105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="264.5" y="154.998"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3882.1895" style="stroke:#A80036;stroke-width:1.0;" width="10" x="548.5" y="184.3086"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3684.3262" style="stroke:#A80036;stroke-width:1.0;" width="10" x="799.5" y="352.8613"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="460.4082" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1043.5" y="483.1035"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="3027.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1220.5" y="980.8223"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1364.5" y="424.4824"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="122.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1058.4434"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="113.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1258.3066"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1444.1699"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="481.624" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="1617.7227"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="172.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2184.623"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="117.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2454.1074"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="183.5186" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2650.9707"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="2919.7656"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="271.7607" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="3093.3184"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="332.3818" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1622.5" y="3450.3555"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1742.6201"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1838.207"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1910.8281"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="1969.4492"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="2483.418"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="3244.8369"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1984.5" y="3626.1846"/><rect fill="#FFFFFF" filter="url(#f10em7rw6yd21k)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2128.5" y="3704.4609"/><polygon fill="#A80036" points="252.5,150.998,262.5,154.998,252.5,158.998,256.5,154.998" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="258.5" y1="154.998" y2="154.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="30.5" y="150.2559">graphrag index --method standard</text><polygon fill="#A80036" points="536.5,180.3086,546.5,184.3086,536.5,188.3086,540.5,184.3086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="274.5" x2="542.5" y1="184.3086" y2="184.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="281.5" y="179.5664">_index_cli(root, method, verbose, cache)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="558.5" x2="600.5" y1="219.7744" y2="219.7744"/><line style="stroke:#A80036;stroke-width:1.0;" x1="600.5" x2="600.5" y1="219.7744" y2="232.7744"/><line style="stroke:#A80036;stroke-width:1.0;" x1="559.5" x2="600.5" y1="232.7744" y2="232.7744"/><polygon fill="#A80036" points="569.5,228.7744,559.5,232.7744,569.5,236.7744,565.5,232.7744" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="565.5" y="215.0322">Load configuration from root_dir</text><path d="M784,197.3086 L784,237.3086 L937,237.3086 L937,207.3086 L927,197.3086 L784,197.3086 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M927,197.3086 L927,207.3086 L937,207.3086 L927,197.3086 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="790" y="214.877">Loads settings.yaml</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="790" y="230.1875">or .env configuration</text><line style="stroke:#A80036;stroke-width:1.0;" x1="558.5" x2="600.5" y1="268.2402" y2="268.2402"/><line style="stroke:#A80036;stroke-width:1.0;" x1="600.5" x2="600.5" y1="268.2402" y2="281.2402"/><line style="stroke:#A80036;stroke-width:1.0;" x1="559.5" x2="600.5" y1="281.2402" y2="281.2402"/><polygon fill="#A80036" points="569.5,277.2402,559.5,281.2402,569.5,285.2402,565.5,281.2402" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="565.5" y="263.498">Initialize loggers</text><line style="stroke:#A80036;stroke-width:1.0;" x1="558.5" x2="600.5" y1="310.5508" y2="310.5508"/><line style="stroke:#A80036;stroke-width:1.0;" x1="600.5" x2="600.5" y1="310.5508" y2="323.5508"/><line style="stroke:#A80036;stroke-width:1.0;" x1="559.5" x2="600.5" y1="323.5508" y2="323.5508"/><polygon fill="#A80036" points="569.5,319.5508,559.5,323.5508,569.5,327.5508,565.5,323.5508" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="565.5" y="305.8086">Setup signal handlers</text><polygon fill="#A80036" points="787.5,348.8613,797.5,352.8613,787.5,356.8613,791.5,352.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="558.5" x2="793.5" y1="352.8613" y2="352.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="565.5" y="348.1191">build_index(config, method, cache)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="809.5" x2="851.5" y1="382.1719" y2="382.1719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="851.5" x2="851.5" y1="382.1719" y2="395.1719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="810.5" x2="851.5" y1="395.1719" y2="395.1719"/><polygon fill="#A80036" points="820.5,391.1719,810.5,395.1719,820.5,399.1719,816.5,395.1719" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="816.5" y="377.4297">Create input/output/cache storage</text><polygon fill="#A80036" points="1352.5,420.4824,1362.5,424.4824,1352.5,428.4824,1356.5,424.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="809.5" x2="1358.5" y1="424.4824" y2="424.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="816.5" y="419.7402">create_storage(config)</text><polygon fill="#A80036" points="820.5,449.793,810.5,453.793,820.5,457.793,816.5,453.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="814.5" x2="1368.5" y1="453.793" y2="453.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="826.5" y="449.0508">Storage instances</text><polygon fill="#A80036" points="1031.5,479.1035,1041.5,483.1035,1031.5,487.1035,1035.5,483.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="809.5" x2="1037.5" y1="483.1035" y2="483.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="816.5" y="478.3613">create_pipeline(config, method)</text><path d="M977.5,498.1035 L1039.5,498.1035 L1039.5,505.1035 L1029.5,515.1035 L977.5,515.1035 L977.5,498.1035 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="417.0977" style="stroke:#000000;stroke-width:2.0;" width="514" x="977.5" y="498.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="992.5" y="511.6719">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="134" x="1054.5" y="510.7383">[method == "standard"]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1053.5" x2="1095.5" y1="611.7773" y2="611.7773"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1095.5" x2="1095.5" y1="611.7773" y2="624.7773"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1054.5" x2="1095.5" y1="624.7773" y2="624.7773"/><polygon fill="#A80036" points="1064.5,620.7773,1054.5,624.7773,1064.5,628.7773,1060.5,624.7773" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1060.5" y="607.0352">Create standard pipeline</text><path d="M1225,520.4141 L1225,698.4141 L1467,698.4141 L1467,530.4141 L1457,520.4141 L1225,520.4141 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1457,520.4141 L1457,530.4141 L1467,530.4141 L1457,520.4141 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="1231" y="537.9824">Workflows:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1231" y="553.293">1. load_input_documents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="1231" y="568.6035">2. create_base_text_units</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="1231" y="583.9141">3. create_final_documents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="1231" y="599.2246">4. extract_graph (LLM)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1231" y="614.5352">5. finalize_graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1231" y="629.8457">6. extract_covariates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1231" y="645.1563">7. create_communities</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1231" y="660.4668">8. create_final_text_units</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="1231" y="675.7773">9. create_community_reports (LLM)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="1231" y="691.0879">10. generate_text_embeddings</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="977.5" x2="1491.5" y1="708.8301" y2="708.8301"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107" x="982.5" y="719.4648">[method == "fast"]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1053.5" x2="1095.5" y1="819.1484" y2="819.1484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1095.5" x2="1095.5" y1="819.1484" y2="832.1484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1054.5" x2="1095.5" y1="832.1484" y2="832.1484"/><polygon fill="#A80036" points="1064.5,828.1484,1054.5,832.1484,1064.5,836.1484,1060.5,832.1484" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="1060.5" y="814.4063">Create fast pipeline</text><path d="M1194,727.7852 L1194,905.7852 L1431,905.7852 L1431,737.7852 L1421,727.7852 L1194,727.7852 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1421,727.7852 L1421,737.7852 L1431,737.7852 L1421,727.7852 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="1200" y="745.3535">Workflows:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1200" y="760.6641">1. load_input_documents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="1200" y="775.9746">2. create_base_text_units</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="1200" y="791.2852">3. create_final_documents</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="1200" y="806.5957">4. extract_graph_nlp (NLP)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1200" y="821.9063">5. prune_graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1200" y="837.2168">6. finalize_graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1200" y="852.5273">7. create_communities</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1200" y="867.8379">8. create_final_text_units</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="1200" y="883.1484">9. create_community_reports_text</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="1200" y="898.459">10. generate_text_embeddings</text><polygon fill="#A80036" points="820.5,939.5117,810.5,943.5117,820.5,947.5117,816.5,943.5117" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="814.5" x2="1047.5" y1="943.5117" y2="943.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="826.5" y="938.7695">Pipeline instance</text><line style="stroke:#A80036;stroke-width:1.0;" x1="809.5" x2="856.5" y1="967.8223" y2="967.8223"/><line style="stroke:#A80036;stroke-width:1.0;" x1="856.5" x2="856.5" y1="967.8223" y2="980.8223"/><line style="stroke:#A80036;stroke-width:1.0;" x1="815.5" x2="856.5" y1="980.8223" y2="980.8223"/><polygon fill="#A80036" points="825.5,976.8223,815.5,980.8223,825.5,984.8223,821.5,980.8223" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="821.5" y="963.0801">run_pipeline(pipeline, context)</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="1014.4775"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1014.4775" y2="1014.4775"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1017.4775" y2="1017.4775"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="253" x="1069.75" y="1003.8223"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="235" x="1075.75" y="1020.3906">Workflow 1: Load Input Documents</text><polygon fill="#A80036" points="1610.5,1054.4434,1620.5,1058.4434,1610.5,1062.4434,1614.5,1058.4434" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="1058.4434" y2="1058.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1237.5" y="1053.7012">load_input_documents(config, context)</text><polygon fill="#A80036" points="1380.5,1083.7539,1370.5,1087.7539,1380.5,1091.7539,1376.5,1087.7539" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="1087.7539" y2="1087.7539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="1386.5" y="1083.0117">Read documents from input_storage</text><polygon fill="#A80036" points="1610.5,1113.0645,1620.5,1117.0645,1610.5,1121.0645,1614.5,1117.0645" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1369.5" x2="1616.5" y1="1117.0645" y2="1117.0645"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1376.5" y="1112.3223">Document data</text><polygon fill="#A80036" points="1380.5,1142.375,1370.5,1146.375,1380.5,1150.375,1376.5,1146.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="1146.375" y2="1146.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="1386.5" y="1141.6328">Write documents.parquet to output</text><polygon fill="#A80036" points="1241.5,1176.6855,1231.5,1180.6855,1241.5,1184.6855,1237.5,1180.6855" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="1180.6855" y2="1180.6855"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1247.5" y="1175.9434">documents DataFrame</text><path d="M1637,1159.375 L1637,1184.375 L1830,1184.375 L1830,1169.375 L1820,1159.375 L1637,1159.375 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1820,1159.375 L1820,1169.375 L1830,1169.375 L1820,1159.375 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="1643" y="1176.9434">documents.parquet created</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="1214.3408"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1214.3408" y2="1214.3408"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1217.3408" y2="1217.3408"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="252" x="1070.25" y="1203.6855"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="234" x="1076.25" y="1220.2539">Workflow 2: Create Base Text Units</text><polygon fill="#A80036" points="1610.5,1254.3066,1620.5,1258.3066,1610.5,1262.3066,1614.5,1258.3066" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="1258.3066" y2="1258.3066"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="1237.5" y="1253.5645">create_base_text_units(config, context)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="1293.7725" y2="1293.7725"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="1293.7725" y2="1306.7725"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="1306.7725" y2="1306.7725"/><polygon fill="#A80036" points="1643.5,1302.7725,1633.5,1306.7725,1643.5,1310.7725,1639.5,1306.7725" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="1639.5" y="1289.0303">Chunk documents using chunking strategy</text><path d="M1923,1271.3066 L1923,1311.3066 L2081,1311.3066 L2081,1281.3066 L2071,1271.3066 L1923,1271.3066 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2071,1271.3066 L2071,1281.3066 L2081,1281.3066 L2071,1271.3066 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1929" y="1288.875">Default: 1200 tokens,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1929" y="1304.1855">100 token overlap</text><polygon fill="#A80036" points="1380.5,1338.2383,1370.5,1342.2383,1380.5,1346.2383,1376.5,1342.2383" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="1342.2383" y2="1342.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="1386.5" y="1337.4961">Write text_units to storage</text><polygon fill="#A80036" points="1241.5,1367.5488,1231.5,1371.5488,1241.5,1375.5488,1237.5,1371.5488" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="1371.5488" y2="1371.5488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1247.5" y="1366.8066">text_units DataFrame</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="1400.2041"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1400.2041" y2="1400.2041"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1403.2041" y2="1403.2041"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="260" x="1066.25" y="1389.5488"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="242" x="1072.25" y="1406.1172">Workflow 3: Create Final Documents</text><polygon fill="#A80036" points="1610.5,1440.1699,1620.5,1444.1699,1610.5,1448.1699,1614.5,1444.1699" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="1444.1699" y2="1444.1699"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="1237.5" y="1439.4277">create_final_documents(config, context)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="1473.4805" y2="1473.4805"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="1473.4805" y2="1486.4805"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="1486.4805" y2="1486.4805"/><polygon fill="#A80036" points="1643.5,1482.4805,1633.5,1486.4805,1643.5,1490.4805,1639.5,1486.4805" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1639.5" y="1468.7383">Enrich documents with metadata</text><polygon fill="#A80036" points="1380.5,1511.791,1370.5,1515.791,1380.5,1519.791,1376.5,1515.791" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="1515.791" y2="1515.791"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="1386.5" y="1511.0488">Write final documents.parquet</text><polygon fill="#A80036" points="1241.5,1541.1016,1231.5,1545.1016,1241.5,1549.1016,1237.5,1545.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="1545.1016" y2="1545.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1247.5" y="1540.3594">documents DataFrame</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="1573.7568"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1573.7568" y2="1573.7568"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="1576.7568" y2="1576.7568"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="268" x="1062.25" y="1563.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="250" x="1068.25" y="1579.6699">Workflow 4: Extract Graph (Standard)</text><polygon fill="#A80036" points="1610.5,1613.7227,1620.5,1617.7227,1610.5,1621.7227,1614.5,1617.7227" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="1617.7227" y2="1617.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="1237.5" y="1612.9805">extract_graph(config, context)</text><polygon fill="#A80036" points="1380.5,1643.0332,1370.5,1647.0332,1380.5,1651.0332,1376.5,1647.0332" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="1647.0332" y2="1647.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="1386.5" y="1642.291">Load text_units</text><polygon fill="#A80036" points="1610.5,1672.3438,1620.5,1676.3438,1610.5,1680.3438,1614.5,1676.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1369.5" x2="1616.5" y1="1676.3438" y2="1676.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1376.5" y="1671.6016">text_units DataFrame</text><path d="M1563,1691.3438 L1637,1691.3438 L1637,1698.3438 L1627,1708.3438 L1563,1708.3438 L1563,1691.3438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="191.1738" style="stroke:#000000;stroke-width:2.0;" width="783.5" x="1563" y="1691.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1578" y="1704.9121">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="160" x="1652" y="1703.9785">[For each text unit (batched)]</text><polygon fill="#A80036" points="1972.5,1738.6201,1982.5,1742.6201,1972.5,1746.6201,1976.5,1742.6201" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="1742.6201" y2="1742.6201"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1639.5" y="1737.8779">Extract entities and relationships</text><path d="M1999,1713.6543 L1999,1753.6543 L2337,1753.6543 L2337,1723.6543 L2327,1713.6543 L1999,1713.6543 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2327,1713.6543 L2327,1723.6543 L2337,1723.6543 L2327,1713.6543 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="2005" y="1731.2227">Prompt: extraction_prompt</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="2005" y="1746.5332">Model: config.extract_graph.completion_model_id</text><polygon fill="#A80036" points="1643.5,1780.5859,1633.5,1784.5859,1643.5,1788.5859,1639.5,1784.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="1784.5859" y2="1784.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="1649.5" y="1779.8438">Extracted entities &amp; relationships</text><path d="M1573,1799.5859 L1640,1799.5859 L1640,1806.5859 L1630,1816.5859 L1573,1816.5859 L1573,1799.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="486.5" x="1573" y="1799.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1588" y="1813.1543">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="115" x="1655" y="1812.2207">[max_gleanings &gt; 0]</text><polygon fill="#A80036" points="1972.5,1834.207,1982.5,1838.207,1972.5,1842.207,1976.5,1838.207" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="1838.207" y2="1838.207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="1639.5" y="1833.4648">Gleaning iteration (more thorough)</text><polygon fill="#A80036" points="1643.5,1863.5176,1633.5,1867.5176,1643.5,1871.5176,1639.5,1867.5176" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="1867.5176" y2="1867.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="1649.5" y="1862.7754">Additional entities &amp; relationships</text><polygon fill="#A80036" points="1972.5,1906.8281,1982.5,1910.8281,1972.5,1914.8281,1976.5,1910.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="1910.8281" y2="1910.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="1639.5" y="1906.0859">Summarize entity descriptions</text><polygon fill="#A80036" points="1643.5,1936.1387,1633.5,1940.1387,1643.5,1944.1387,1639.5,1940.1387" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="1940.1387" y2="1940.1387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1649.5" y="1935.3965">Summarized descriptions</text><polygon fill="#A80036" points="1972.5,1965.4492,1982.5,1969.4492,1972.5,1973.4492,1976.5,1969.4492" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="1969.4492" y2="1969.4492"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="1639.5" y="1964.707">Summarize relationship descriptions</text><polygon fill="#A80036" points="1643.5,1994.7598,1633.5,1998.7598,1643.5,2002.7598,1639.5,1998.7598" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="1998.7598" y2="1998.7598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1649.5" y="1994.0176">Summarized descriptions</text><polygon fill="#A80036" points="1380.5,2024.0703,1370.5,2028.0703,1380.5,2032.0703,1376.5,2028.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2028.0703" y2="2028.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1386.5" y="2023.3281">Write entities.parquet</text><polygon fill="#A80036" points="1380.5,2053.3809,1370.5,2057.3809,1380.5,2061.3809,1376.5,2057.3809" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2057.3809" y2="2057.3809"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="1386.5" y="2052.6387">Write relationships.parquet</text><polygon fill="#A80036" points="1241.5,2095.3467,1231.5,2099.3467,1241.5,2103.3467,1237.5,2099.3467" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="2099.3467" y2="2099.3467"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="1247.5" y="2094.6045">entities &amp; relationships DataFrames</text><path d="M1637,2070.3809 L1637,2110.3809 L1869,2110.3809 L1869,2080.3809 L1859,2070.3809 L1637,2070.3809 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1859,2070.3809 L1859,2080.3809 L1869,2080.3809 L1859,2070.3809 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1643" y="2087.9492">Raw entities.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="1643" y="2103.2598">and relationships.parquet created</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="2140.6572"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2140.6572" y2="2140.6572"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2143.6572" y2="2143.6572"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="198" x="1097.25" y="2130.002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180" x="1103.25" y="2146.5703">Workflow 5: Finalize Graph</text><polygon fill="#A80036" points="1610.5,2180.623,1620.5,2184.623,1610.5,2188.623,1614.5,2184.623" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="2184.623" y2="2184.623"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="1237.5" y="2179.8809">finalize_graph(config, context)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="2213.9336" y2="2213.9336"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="2213.9336" y2="2226.9336"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="2226.9336" y2="2226.9336"/><polygon fill="#A80036" points="1643.5,2222.9336,1633.5,2226.9336,1643.5,2230.9336,1639.5,2226.9336" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="1639.5" y="2209.1914">Calculate node degrees</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="2256.2441" y2="2256.2441"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="2256.2441" y2="2269.2441"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="2269.2441" y2="2269.2441"/><polygon fill="#A80036" points="1643.5,2265.2441,1633.5,2269.2441,1643.5,2273.2441,1639.5,2269.2441" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1639.5" y="2251.502">Calculate combined degrees</text><polygon fill="#A80036" points="1380.5,2294.5547,1370.5,2298.5547,1380.5,2302.5547,1376.5,2298.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2298.5547" y2="2298.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="1386.5" y="2293.8125">Update entities.parquet</text><polygon fill="#A80036" points="1380.5,2323.8652,1370.5,2327.8652,1380.5,2331.8652,1376.5,2327.8652" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2327.8652" y2="2327.8652"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="1386.5" y="2323.123">Update relationships.parquet</text><polygon fill="#A80036" points="1241.5,2353.1758,1231.5,2357.1758,1241.5,2361.1758,1237.5,2357.1758" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="2357.1758" y2="2357.1758"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1247.5" y="2352.4336">Finalized graph DataFrames</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="2385.8311"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2385.8311" y2="2385.8311"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2388.8311" y2="2388.8311"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="294" x="1049.25" y="2375.1758"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="276" x="1055.25" y="2391.7441">Workflow 6: Extract Covariates (Optional)</text><path d="M1179.5,2415.4863 L1246.5,2415.4863 L1246.5,2422.4863 L1236.5,2432.4863 L1179.5,2432.4863 L1179.5,2415.4863 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:2.0;" width="880" x="1179.5" y="2415.4863"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="1194.5" y="2429.0547">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173" x="1261.5" y="2428.1211">[config.extract_claims.enabled]</text><polygon fill="#A80036" points="1610.5,2450.1074,1620.5,2454.1074,1610.5,2458.1074,1614.5,2454.1074" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="2454.1074" y2="2454.1074"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1237.5" y="2449.3652">extract_covariates(config, context)</text><polygon fill="#A80036" points="1972.5,2479.418,1982.5,2483.418,1972.5,2487.418,1976.5,2483.418" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="2483.418" y2="2483.418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="1639.5" y="2478.6758">Extract claims from text units</text><polygon fill="#A80036" points="1643.5,2508.7285,1633.5,2512.7285,1643.5,2516.7285,1639.5,2512.7285" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="2512.7285" y2="2512.7285"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1649.5" y="2507.9863">Extracted claims</text><polygon fill="#A80036" points="1380.5,2538.0391,1370.5,2542.0391,1380.5,2546.0391,1376.5,2542.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2542.0391" y2="2542.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1386.5" y="2537.2969">Write covariates.parquet</text><polygon fill="#A80036" points="1241.5,2567.3496,1231.5,2571.3496,1241.5,2575.3496,1237.5,2571.3496" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="2571.3496" y2="2571.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1247.5" y="2566.6074">covariates DataFrame</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="2607.0049"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2607.0049" y2="2607.0049"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2610.0049" y2="2610.0049"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="237" x="1077.75" y="2596.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="219" x="1083.75" y="2612.918">Workflow 7: Create Communities</text><polygon fill="#A80036" points="1610.5,2646.9707,1620.5,2650.9707,1610.5,2654.9707,1614.5,2650.9707" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="2650.9707" y2="2650.9707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="1237.5" y="2646.2285">create_communities(config, context)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="2680.2813" y2="2680.2813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="2680.2813" y2="2693.2813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="2693.2813" y2="2693.2813"/><polygon fill="#A80036" points="1643.5,2689.2813,1633.5,2693.2813,1643.5,2697.2813,1639.5,2693.2813" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="1639.5" y="2675.5391">Build NetworkX graph from entities/relationships</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="2736.4023" y2="2736.4023"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="2736.4023" y2="2749.4023"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="2749.4023" y2="2749.4023"/><polygon fill="#A80036" points="1643.5,2745.4023,1633.5,2749.4023,1643.5,2753.4023,1639.5,2749.4023" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="1639.5" y="2731.6602">Apply Leiden clustering algorithm</text><path d="M1864,2706.2813 L1864,2761.2813 L2098,2761.2813 L2098,2716.2813 L2088,2706.2813 L1864,2706.2813 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2088,2706.2813 L2088,2716.2813 L2098,2716.2813 L2088,2706.2813 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="1870" y="2723.8496">Hierarchical community detection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="1870" y="2739.1602">max_cluster_size: 10 (default)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="1870" y="2754.4707">use_lcc: true</text><polygon fill="#A80036" points="1380.5,2788.5234,1370.5,2792.5234,1380.5,2796.5234,1376.5,2792.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2792.5234" y2="2792.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="1386.5" y="2787.7813">Write communities.parquet</text><polygon fill="#A80036" points="1241.5,2830.4893,1231.5,2834.4893,1241.5,2838.4893,1237.5,2834.4893" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="2834.4893" y2="2834.4893"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1247.5" y="2829.7471">communities DataFrame</text><path d="M1637,2805.5234 L1637,2845.5234 L1920,2845.5234 L1920,2815.5234 L1910,2805.5234 L1637,2805.5234 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1910,2805.5234 L1910,2815.5234 L1920,2815.5234 L1910,2805.5234 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="1643" y="2823.0918">Hierarchical communities.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="1643" y="2838.4023">with levels and parent/child relationships</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="2875.7998"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2875.7998" y2="2875.7998"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="2878.7998" y2="2878.7998"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="253" x="1069.75" y="2865.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="235" x="1075.75" y="2881.7129">Workflow 8: Create Final Text Units</text><polygon fill="#A80036" points="1610.5,2915.7656,1620.5,2919.7656,1610.5,2923.7656,1614.5,2919.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="2919.7656" y2="2919.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1237.5" y="2915.0234">create_final_text_units(config, context)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="2949.0762" y2="2949.0762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="2949.0762" y2="2962.0762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="2962.0762" y2="2962.0762"/><polygon fill="#A80036" points="1643.5,2958.0762,1633.5,2962.0762,1643.5,2966.0762,1639.5,2962.0762" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="1639.5" y="2944.334">Link text units to entities/relationships/communities</text><polygon fill="#A80036" points="1380.5,2987.3867,1370.5,2991.3867,1380.5,2995.3867,1376.5,2991.3867" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="2991.3867" y2="2991.3867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1386.5" y="2986.6445">Write final text_units.parquet</text><polygon fill="#A80036" points="1241.5,3016.6973,1231.5,3020.6973,1241.5,3024.6973,1237.5,3020.6973" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="3020.6973" y2="3020.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1247.5" y="3015.9551">text_units DataFrame</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="3049.3525"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="3049.3525" y2="3049.3525"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="3052.3525" y2="3052.3525"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="282" x="1055.25" y="3038.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="264" x="1061.25" y="3055.2656">Workflow 9: Create Community Reports</text><polygon fill="#A80036" points="1610.5,3089.3184,1620.5,3093.3184,1610.5,3097.3184,1614.5,3093.3184" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="3093.3184" y2="3093.3184"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="1237.5" y="3088.5762">create_community_reports(config, context)</text><path d="M1573,3108.3184 L1647,3108.3184 L1647,3115.3184 L1637,3125.3184 L1573,3125.3184 L1573,3108.3184 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="186.4844" style="stroke:#000000;stroke-width:2.0;" width="809.5" x="1573" y="3108.3184"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1588" y="3121.8867">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="204" x="1662" y="3120.9531">[For each community (at each level)]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="3168.4053" y2="3168.4053"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="3168.4053" y2="3181.4053"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="3181.4053" y2="3181.4053"/><polygon fill="#A80036" points="1643.5,3177.4053,1633.5,3181.4053,1643.5,3185.4053,1639.5,3181.4053" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1639.5" y="3163.6631">Build local context</text><path d="M1768,3130.6289 L1768,3201.6289 L1925,3201.6289 L1925,3140.6289 L1915,3130.6289 L1768,3130.6289 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1915,3130.6289 L1915,3140.6289 L1925,3140.6289 L1915,3130.6289 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1774" y="3148.1973">Include:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1774" y="3163.5078">- Community entities</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1774" y="3178.8184">- Relationships</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1774" y="3194.1289">- Claims (if enabled)</text><polygon fill="#A80036" points="1972.5,3240.8369,1982.5,3244.8369,1972.5,3248.8369,1976.5,3244.8369" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="3244.8369" y2="3244.8369"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="1639.5" y="3240.0947">Generate community report</text><path d="M1999,3215.8711 L1999,3255.8711 L2373,3255.8711 L2373,3225.8711 L2363,3215.8711 L1999,3215.8711 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2363,3215.8711 L2363,3225.8711 L2373,3225.8711 L2363,3215.8711 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="2005" y="3233.4395">Prompt: graph_prompt</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="2005" y="3248.75">Model: config.community_reports.completion_model_id</text><polygon fill="#A80036" points="1643.5,3282.8027,1633.5,3286.8027,1643.5,3290.8027,1639.5,3286.8027" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="3286.8027" y2="3286.8027"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="1649.5" y="3282.0605">Report (summary, findings, rating)</text><polygon fill="#A80036" points="1380.5,3319.1133,1370.5,3323.1133,1380.5,3327.1133,1376.5,3323.1133" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1374.5" x2="1621.5" y1="3323.1133" y2="3323.1133"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="1386.5" y="3318.3711">Write community_reports.parquet</text><polygon fill="#A80036" points="1241.5,3361.0791,1231.5,3365.0791,1241.5,3369.0791,1237.5,3365.0791" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="3365.0791" y2="3365.0791"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="1247.5" y="3360.3369">community_reports DataFrame</text><path d="M1637,3336.1133 L1637,3376.1133 L1857,3376.1133 L1857,3346.1133 L1847,3336.1133 L1637,3336.1133 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1847,3336.1133 L1847,3346.1133 L1857,3346.1133 L1847,3336.1133 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1643" y="3353.6816">community_reports.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1643" y="3368.9922">with LLM-generated summaries</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="3406.3896"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="3406.3896" y2="3406.3896"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="3409.3896" y2="3409.3896"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="294" x="1049.25" y="3395.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="276" x="1055.25" y="3412.3027">Workflow 10: Generate Text Embeddings</text><polygon fill="#A80036" points="1610.5,3446.3555,1620.5,3450.3555,1610.5,3454.3555,1614.5,3450.3555" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1616.5" y1="3450.3555" y2="3450.3555"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="1237.5" y="3445.6133">generate_text_embeddings(config, context)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1674.5" y1="3501.1318" y2="3501.1318"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1674.5" x2="1674.5" y1="3501.1318" y2="3514.1318"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1633.5" x2="1674.5" y1="3514.1318" y2="3514.1318"/><polygon fill="#A80036" points="1643.5,3510.1318,1633.5,3514.1318,1643.5,3518.1318,1639.5,3514.1318" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="1639.5" y="3496.3896">Prepare texts for embedding</text><path d="M1829,3463.3555 L1829,3534.3555 L2020,3534.3555 L2020,3473.3555 L2010,3463.3555 L1829,3463.3555 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2010,3463.3555 L2010,3473.3555 L2020,3473.3555 L2010,3463.3555 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1835" y="3480.9238">Three types:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1835" y="3496.2344">1. text_unit_text</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1835" y="3511.5449">2. entity_description</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="1835" y="3526.8555">3. community_full_content</text><path d="M1563,3550.5977 L1637,3550.5977 L1637,3557.5977 L1627,3567.5977 L1563,3567.5977 L1563,3550.5977 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="191.1738" style="stroke:#000000;stroke-width:2.0;" width="779.5" x="1563" y="3550.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1578" y="3564.166">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="148" x="1652" y="3563.2324">[For each embedding type]</text><path d="M1573,3574.9082 L1647,3574.9082 L1647,3581.9082 L1637,3591.9082 L1573,3591.9082 L1573,3574.9082 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="101.2422" style="stroke:#000000;stroke-width:2.0;" width="759.5" x="1573" y="3574.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1588" y="3588.4766">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1662" y="3587.543">[For each batch of texts]</text><polygon fill="#A80036" points="1972.5,3622.1846,1982.5,3626.1846,1972.5,3630.1846,1976.5,3626.1846" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="1978.5" y1="3626.1846" y2="3626.1846"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1639.5" y="3621.4424">Generate embeddings</text><path d="M1999,3597.2188 L1999,3637.2188 L2323,3637.2188 L2323,3607.2188 L2313,3597.2188 L1999,3597.2188 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2313,3597.2188 L2313,3607.2188 L2323,3607.2188 L2313,3597.2188 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="2005" y="3614.7871">Model: config.embed_text.embedding_model_id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="2005" y="3630.0977">Batch size: 16 (default)</text><polygon fill="#A80036" points="1643.5,3664.1504,1633.5,3668.1504,1643.5,3672.1504,1639.5,3668.1504" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="1988.5" y1="3668.1504" y2="3668.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="1649.5" y="3663.4082">Embedding vectors</text><polygon fill="#A80036" points="2116.5,3700.4609,2126.5,3704.4609,2116.5,3708.4609,2120.5,3704.4609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1632.5" x2="2122.5" y1="3704.4609" y2="3704.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="1639.5" y="3699.7188">Load embeddings into vector store</text><polygon fill="#A80036" points="1643.5,3729.7715,1633.5,3733.7715,1643.5,3737.7715,1639.5,3733.7715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1637.5" x2="2132.5" y1="3733.7715" y2="3733.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="1649.5" y="3729.0293">Stored successfully</text><polygon fill="#A80036" points="1241.5,3778.7373,1231.5,3782.7373,1241.5,3786.7373,1237.5,3782.7373" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1235.5" x2="1626.5" y1="3782.7373" y2="3782.7373"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1247.5" y="3777.9951">Embeddings complete</text><path d="M1637,3753.7715 L1637,3793.7715 L1821,3793.7715 L1821,3763.7715 L1811,3753.7715 L1637,3753.7715 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1811,3753.7715 L1811,3763.7715 L1821,3763.7715 L1811,3753.7715 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1643" y="3771.3398">Vector indexes created</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="1643" y="3786.6504">in configured vector store</text><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2392.5" x="0" y="3824.0479"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="3824.0479" y2="3824.0479"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2392.5" y1="3827.0479" y2="3827.0479"/><rect fill="#EEEEEE" filter="url(#f10em7rw6yd21k)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="140" x="1126.25" y="3813.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122" x="1132.25" y="3829.9609">Pipeline Complete</text><polygon fill="#A80036" points="1357.5,3876.6689,1367.5,3880.6689,1357.5,3884.6689,1361.5,3880.6689" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1363.5" y1="3880.6689" y2="3880.6689"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1237.5" y="3875.9268">Write context.json</text><path d="M1374,3851.7031 L1374,3891.7031 L1512,3891.7031 L1512,3861.7031 L1502,3851.7031 L1374,3851.7031 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1502,3851.7031 L1502,3861.7031 L1512,3861.7031 L1502,3851.7031 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1380" y="3869.2715">Save pipeline state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1380" y="3884.582">for future updates</text><polygon fill="#A80036" points="1357.5,3946.6006,1367.5,3950.6006,1357.5,3954.6006,1361.5,3950.6006" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1230.5" x2="1363.5" y1="3950.6006" y2="3950.6006"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="1237.5" y="3945.8584">Write stats.json</text><path d="M1374,3906.3242 L1374,3977.3242 L1530,3977.3242 L1530,3916.3242 L1520,3906.3242 L1374,3906.3242 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1520,3906.3242 L1520,3916.3242 L1530,3916.3242 L1520,3906.3242 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1380" y="3923.8926">Save statistics:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1380" y="3939.2031">- Workflow durations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1380" y="3954.5137">- Token usage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1380" y="3969.8242">- Error counts</text><polygon fill="#A80036" points="820.5,4003.877,810.5,4007.877,820.5,4011.877,816.5,4007.877" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="814.5" x2="1224.5" y1="4007.877" y2="4007.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="826.5" y="4003.1348">Pipeline results with stats</text><polygon fill="#A80036" points="569.5,4033.1875,559.5,4037.1875,569.5,4041.1875,565.5,4037.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="563.5" x2="803.5" y1="4037.1875" y2="4037.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="575.5" y="4032.4453">Index complete</text><polygon fill="#A80036" points="285.5,4062.498,275.5,4066.498,285.5,4070.498,281.5,4066.498" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="279.5" x2="552.5" y1="4066.498" y2="4066.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="291.5" y="4061.7559">Success/Failure status</text><polygon fill="#A80036" points="34.5,4091.8086,24.5,4095.8086,34.5,4099.8086,30.5,4095.8086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="268.5" y1="4095.8086" y2="4095.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="40.5" y="4091.0664">Exit with status code</text><path d="M1233,4108.8086 L1233,4362.8086 L1501,4362.8086 L1501,4118.8086 L1491,4108.8086 L1233,4108.8086 " fill="#FBFB77" filter="url(#f10em7rw6yd21k)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1491,4108.8086 L1491,4118.8086 L1501,4118.8086 L1491,4108.8086 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="172" x="1239" y="4126.377">Output Storage Structure:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="1239" y="4141.6875">output/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1239" y="4156.998"> documents.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1239" y="4172.3086"> text_units.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="1239" y="4187.6191"> entities.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1239" y="4202.9297"> relationships.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1239" y="4218.2402"> communities.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="1239" y="4233.5508"> community_reports.parquet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="1239" y="4248.8613"> covariates.parquet (optional)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="1239" y="4264.1719"> context.json</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1239" y="4279.4824"> stats.json</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1243" y="4294.793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1239" y="4310.1035">Vector Store:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="1239" y="4325.4141">- text_unit_text embeddings</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="1239" y="4340.7246">- entity_description embeddings</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="1239" y="4356.0352">- community_full_content embeddings</text><!--MD5=[0ff61c213e9569001598620bebde7424]
@startuml GraphRAG Index Operation Sequence
' PlantUML v1.2017.15 compatible syntax
title GraphRAG Index Operation - Standard Method

actor User
participant "CLI\n(main.py)" as CLI
participant "IndexCLI\n(index.py)" as IndexCLI
participant "API\n(api/index.py)" as API
participant "PipelineFactory\n(factory.py)" as Factory
participant "Pipeline" as Pipeline
participant "Storage" as Storage
participant "Workflows" as Workflows
participant "LLM\n(graphrag_llm)" as LLM
participant "VectorStore\n(graphrag_vectors)" as VectorStore

User -> CLI: graphrag index - -method standard
activate CLI

CLI -> IndexCLI: _index_cli(root, method, verbose, cache)
activate IndexCLI

IndexCLI -> IndexCLI: Load configuration from root_dir
note right: Loads settings.yaml\nor .env configuration

IndexCLI -> IndexCLI: Initialize loggers
IndexCLI -> IndexCLI: Setup signal handlers

IndexCLI -> API: build_index(config, method, cache)
activate API

API -> API: Create input/output/cache storage
API -> Storage: create_storage(config)
activate Storage
Storage - -> API: Storage instances
deactivate Storage

API -> Factory: create_pipeline(config, method)
activate Factory

alt method == "standard"
    Factory -> Factory: Create standard pipeline
    note right: Workflows:\n1. load_input_documents\n2. create_base_text_units\n3. create_final_documents\n4. extract_graph (LLM)\n5. finalize_graph\n6. extract_covariates\n7. create_communities\n8. create_final_text_units\n9. create_community_reports (LLM)\n10. generate_text_embeddings
else method == "fast"
    Factory -> Factory: Create fast pipeline
    note right: Workflows:\n1. load_input_documents\n2. create_base_text_units\n3. create_final_documents\n4. extract_graph_nlp (NLP)\n5. prune_graph\n6. finalize_graph\n7. create_communities\n8. create_final_text_units\n9. create_community_reports_text\n10. generate_text_embeddings
end

Factory - -> API: Pipeline instance
deactivate Factory

API -> API: run_pipeline(pipeline, context)
activate Pipeline

== Workflow 1: Load Input Documents ==
Pipeline -> Workflows: load_input_documents(config, context)
activate Workflows
Workflows -> Storage: Read documents from input_storage
Storage - -> Workflows: Document data
Workflows -> Storage: Write documents.parquet to output
Workflows - -> Pipeline: documents DataFrame
deactivate Workflows
note right: documents.parquet created

== Workflow 2: Create Base Text Units ==
Pipeline -> Workflows: create_base_text_units(config, context)
activate Workflows
Workflows -> Workflows: Chunk documents using chunking strategy
note right: Default: 1200 tokens,\n100 token overlap
Workflows -> Storage: Write text_units to storage
Workflows - -> Pipeline: text_units DataFrame
deactivate Workflows

== Workflow 3: Create Final Documents ==
Pipeline -> Workflows: create_final_documents(config, context)
activate Workflows
Workflows -> Workflows: Enrich documents with metadata
Workflows -> Storage: Write final documents.parquet
Workflows - -> Pipeline: documents DataFrame
deactivate Workflows

== Workflow 4: Extract Graph (Standard) ==
Pipeline -> Workflows: extract_graph(config, context)
activate Workflows
Workflows -> Storage: Load text_units
Storage - -> Workflows: text_units DataFrame

loop For each text unit (batched)
    Workflows -> LLM: Extract entities and relationships
    activate LLM
    note right: Prompt: extraction_prompt\nModel: config.extract_graph.completion_model_id
    LLM - -> Workflows: Extracted entities & relationships
    deactivate LLM

    opt max_gleanings > 0
        Workflows -> LLM: Gleaning iteration (more thorough)
        activate LLM
        LLM - -> Workflows: Additional entities & relationships
        deactivate LLM
    end
end

Workflows -> LLM: Summarize entity descriptions
activate LLM
LLM - -> Workflows: Summarized descriptions
deactivate LLM

Workflows -> LLM: Summarize relationship descriptions
activate LLM
LLM - -> Workflows: Summarized descriptions
deactivate LLM

Workflows -> Storage: Write entities.parquet
Workflows -> Storage: Write relationships.parquet
Workflows - -> Pipeline: entities & relationships DataFrames
deactivate Workflows
note right: Raw entities.parquet\nand relationships.parquet created

== Workflow 5: Finalize Graph ==
Pipeline -> Workflows: finalize_graph(config, context)
activate Workflows
Workflows -> Workflows: Calculate node degrees
Workflows -> Workflows: Calculate combined degrees
Workflows -> Storage: Update entities.parquet
Workflows -> Storage: Update relationships.parquet
Workflows - -> Pipeline: Finalized graph DataFrames
deactivate Workflows

== Workflow 6: Extract Covariates (Optional) ==
opt config.extract_claims.enabled
    Pipeline -> Workflows: extract_covariates(config, context)
    activate Workflows
    Workflows -> LLM: Extract claims from text units
    activate LLM
    LLM - -> Workflows: Extracted claims
    deactivate LLM
    Workflows -> Storage: Write covariates.parquet
    Workflows - -> Pipeline: covariates DataFrame
    deactivate Workflows
end

== Workflow 7: Create Communities ==
Pipeline -> Workflows: create_communities(config, context)
activate Workflows
Workflows -> Workflows: Build NetworkX graph from entities/relationships
Workflows -> Workflows: Apply Leiden clustering algorithm
note right: Hierarchical community detection\nmax_cluster_size: 10 (default)\nuse_lcc: true
Workflows -> Storage: Write communities.parquet
Workflows - -> Pipeline: communities DataFrame
deactivate Workflows
note right: Hierarchical communities.parquet\nwith levels and parent/child relationships

== Workflow 8: Create Final Text Units ==
Pipeline -> Workflows: create_final_text_units(config, context)
activate Workflows
Workflows -> Workflows: Link text units to entities/relationships/communities
Workflows -> Storage: Write final text_units.parquet
Workflows - -> Pipeline: text_units DataFrame
deactivate Workflows

== Workflow 9: Create Community Reports ==
Pipeline -> Workflows: create_community_reports(config, context)
activate Workflows

loop For each community (at each level)
    Workflows -> Workflows: Build local context
    note right: Include:\n- Community entities\n- Relationships\n- Claims (if enabled)

    Workflows -> LLM: Generate community report
    activate LLM
    note right: Prompt: graph_prompt\nModel: config.community_reports.completion_model_id
    LLM - -> Workflows: Report (summary, findings, rating)
    deactivate LLM
end

Workflows -> Storage: Write community_reports.parquet
Workflows - -> Pipeline: community_reports DataFrame
deactivate Workflows
note right: community_reports.parquet\nwith LLM-generated summaries

== Workflow 10: Generate Text Embeddings ==
Pipeline -> Workflows: generate_text_embeddings(config, context)
activate Workflows

Workflows -> Workflows: Prepare texts for embedding
note right: Three types:\n1. text_unit_text\n2. entity_description\n3. community_full_content

loop For each embedding type
    loop For each batch of texts
        Workflows -> LLM: Generate embeddings
        activate LLM
        note right: Model: config.embed_text.embedding_model_id\nBatch size: 16 (default)
        LLM - -> Workflows: Embedding vectors
        deactivate LLM
    end

    Workflows -> VectorStore: Load embeddings into vector store
    activate VectorStore
    VectorStore - -> Workflows: Stored successfully
    deactivate VectorStore
end

Workflows - -> Pipeline: Embeddings complete
deactivate Workflows
note right: Vector indexes created\nin configured vector store

== Pipeline Complete ==
Pipeline -> Storage: Write context.json
note right: Save pipeline state\nfor future updates

Pipeline -> Storage: Write stats.json
note right: Save statistics:\n- Workflow durations\n- Token usage\n- Error counts

Pipeline - -> API: Pipeline results with stats
deactivate Pipeline

API - -> IndexCLI: Index complete
deactivate API

IndexCLI - -> CLI: Success/Failure status
deactivate IndexCLI

CLI - -> User: Exit with status code
deactivate CLI

note over Storage
  **Output Storage Structure:**
  output/
   documents.parquet
   text_units.parquet
   entities.parquet
   relationships.parquet
   communities.parquet
   community_reports.parquet
   covariates.parquet (optional)
   context.json
   stats.json

  **Vector Store:**
  - text_unit_text embeddings
  - entity_description embeddings
  - community_full_content embeddings
end note

@enduml

@startuml GraphRAG Index Operation Sequence
title GraphRAG Index Operation - Standard Method

actor User
participant "CLI\n(main.py)" as CLI
participant "IndexCLI\n(index.py)" as IndexCLI
participant "API\n(api/index.py)" as API
participant "PipelineFactory\n(factory.py)" as Factory
participant "Pipeline" as Pipeline
participant "Storage" as Storage
participant "Workflows" as Workflows
participant "LLM\n(graphrag_llm)" as LLM
participant "VectorStore\n(graphrag_vectors)" as VectorStore

User -> CLI: graphrag index - -method standard
activate CLI

CLI -> IndexCLI: _index_cli(root, method, verbose, cache)
activate IndexCLI

IndexCLI -> IndexCLI: Load configuration from root_dir
note right: Loads settings.yaml\nor .env configuration

IndexCLI -> IndexCLI: Initialize loggers
IndexCLI -> IndexCLI: Setup signal handlers

IndexCLI -> API: build_index(config, method, cache)
activate API

API -> API: Create input/output/cache storage
API -> Storage: create_storage(config)
activate Storage
Storage - -> API: Storage instances
deactivate Storage

API -> Factory: create_pipeline(config, method)
activate Factory

alt method == "standard"
    Factory -> Factory: Create standard pipeline
    note right: Workflows:\n1. load_input_documents\n2. create_base_text_units\n3. create_final_documents\n4. extract_graph (LLM)\n5. finalize_graph\n6. extract_covariates\n7. create_communities\n8. create_final_text_units\n9. create_community_reports (LLM)\n10. generate_text_embeddings
else method == "fast"
    Factory -> Factory: Create fast pipeline
    note right: Workflows:\n1. load_input_documents\n2. create_base_text_units\n3. create_final_documents\n4. extract_graph_nlp (NLP)\n5. prune_graph\n6. finalize_graph\n7. create_communities\n8. create_final_text_units\n9. create_community_reports_text\n10. generate_text_embeddings
end

Factory - -> API: Pipeline instance
deactivate Factory

API -> API: run_pipeline(pipeline, context)
activate Pipeline

== Workflow 1: Load Input Documents ==
Pipeline -> Workflows: load_input_documents(config, context)
activate Workflows
Workflows -> Storage: Read documents from input_storage
Storage - -> Workflows: Document data
Workflows -> Storage: Write documents.parquet to output
Workflows - -> Pipeline: documents DataFrame
deactivate Workflows
note right: documents.parquet created

== Workflow 2: Create Base Text Units ==
Pipeline -> Workflows: create_base_text_units(config, context)
activate Workflows
Workflows -> Workflows: Chunk documents using chunking strategy
note right: Default: 1200 tokens,\n100 token overlap
Workflows -> Storage: Write text_units to storage
Workflows - -> Pipeline: text_units DataFrame
deactivate Workflows

== Workflow 3: Create Final Documents ==
Pipeline -> Workflows: create_final_documents(config, context)
activate Workflows
Workflows -> Workflows: Enrich documents with metadata
Workflows -> Storage: Write final documents.parquet
Workflows - -> Pipeline: documents DataFrame
deactivate Workflows

== Workflow 4: Extract Graph (Standard) ==
Pipeline -> Workflows: extract_graph(config, context)
activate Workflows
Workflows -> Storage: Load text_units
Storage - -> Workflows: text_units DataFrame

loop For each text unit (batched)
    Workflows -> LLM: Extract entities and relationships
    activate LLM
    note right: Prompt: extraction_prompt\nModel: config.extract_graph.completion_model_id
    LLM - -> Workflows: Extracted entities & relationships
    deactivate LLM

    opt max_gleanings > 0
        Workflows -> LLM: Gleaning iteration (more thorough)
        activate LLM
        LLM - -> Workflows: Additional entities & relationships
        deactivate LLM
    end
end

Workflows -> LLM: Summarize entity descriptions
activate LLM
LLM - -> Workflows: Summarized descriptions
deactivate LLM

Workflows -> LLM: Summarize relationship descriptions
activate LLM
LLM - -> Workflows: Summarized descriptions
deactivate LLM

Workflows -> Storage: Write entities.parquet
Workflows -> Storage: Write relationships.parquet
Workflows - -> Pipeline: entities & relationships DataFrames
deactivate Workflows
note right: Raw entities.parquet\nand relationships.parquet created

== Workflow 5: Finalize Graph ==
Pipeline -> Workflows: finalize_graph(config, context)
activate Workflows
Workflows -> Workflows: Calculate node degrees
Workflows -> Workflows: Calculate combined degrees
Workflows -> Storage: Update entities.parquet
Workflows -> Storage: Update relationships.parquet
Workflows - -> Pipeline: Finalized graph DataFrames
deactivate Workflows

== Workflow 6: Extract Covariates (Optional) ==
opt config.extract_claims.enabled
    Pipeline -> Workflows: extract_covariates(config, context)
    activate Workflows
    Workflows -> LLM: Extract claims from text units
    activate LLM
    LLM - -> Workflows: Extracted claims
    deactivate LLM
    Workflows -> Storage: Write covariates.parquet
    Workflows - -> Pipeline: covariates DataFrame
    deactivate Workflows
end

== Workflow 7: Create Communities ==
Pipeline -> Workflows: create_communities(config, context)
activate Workflows
Workflows -> Workflows: Build NetworkX graph from entities/relationships
Workflows -> Workflows: Apply Leiden clustering algorithm
note right: Hierarchical community detection\nmax_cluster_size: 10 (default)\nuse_lcc: true
Workflows -> Storage: Write communities.parquet
Workflows - -> Pipeline: communities DataFrame
deactivate Workflows
note right: Hierarchical communities.parquet\nwith levels and parent/child relationships

== Workflow 8: Create Final Text Units ==
Pipeline -> Workflows: create_final_text_units(config, context)
activate Workflows
Workflows -> Workflows: Link text units to entities/relationships/communities
Workflows -> Storage: Write final text_units.parquet
Workflows - -> Pipeline: text_units DataFrame
deactivate Workflows

== Workflow 9: Create Community Reports ==
Pipeline -> Workflows: create_community_reports(config, context)
activate Workflows

loop For each community (at each level)
    Workflows -> Workflows: Build local context
    note right: Include:\n- Community entities\n- Relationships\n- Claims (if enabled)

    Workflows -> LLM: Generate community report
    activate LLM
    note right: Prompt: graph_prompt\nModel: config.community_reports.completion_model_id
    LLM - -> Workflows: Report (summary, findings, rating)
    deactivate LLM
end

Workflows -> Storage: Write community_reports.parquet
Workflows - -> Pipeline: community_reports DataFrame
deactivate Workflows
note right: community_reports.parquet\nwith LLM-generated summaries

== Workflow 10: Generate Text Embeddings ==
Pipeline -> Workflows: generate_text_embeddings(config, context)
activate Workflows

Workflows -> Workflows: Prepare texts for embedding
note right: Three types:\n1. text_unit_text\n2. entity_description\n3. community_full_content

loop For each embedding type
    loop For each batch of texts
        Workflows -> LLM: Generate embeddings
        activate LLM
        note right: Model: config.embed_text.embedding_model_id\nBatch size: 16 (default)
        LLM - -> Workflows: Embedding vectors
        deactivate LLM
    end

    Workflows -> VectorStore: Load embeddings into vector store
    activate VectorStore
    VectorStore - -> Workflows: Stored successfully
    deactivate VectorStore
end

Workflows - -> Pipeline: Embeddings complete
deactivate Workflows
note right: Vector indexes created\nin configured vector store

== Pipeline Complete ==
Pipeline -> Storage: Write context.json
note right: Save pipeline state\nfor future updates

Pipeline -> Storage: Write stats.json
note right: Save statistics:\n- Workflow durations\n- Token usage\n- Error counts

Pipeline - -> API: Pipeline results with stats
deactivate Pipeline

API - -> IndexCLI: Index complete
deactivate API

IndexCLI - -> CLI: Success/Failure status
deactivate IndexCLI

CLI - -> User: Exit with status code
deactivate CLI

note over Storage
  **Output Storage Structure:**
  output/
   documents.parquet
   text_units.parquet
   entities.parquet
   relationships.parquet
   communities.parquet
   community_reports.parquet
   covariates.parquet (optional)
   context.json
   stats.json

  **Vector Store:**
  - text_unit_text embeddings
  - entity_description embeddings
  - community_full_content embeddings
end note

@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 SGT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: SG
--></g></svg>