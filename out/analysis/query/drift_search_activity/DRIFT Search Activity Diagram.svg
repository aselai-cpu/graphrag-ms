<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="5492px" preserveAspectRatio="none" style="width:9702px;height:5492px;" version="1.1" viewBox="0 0 9702 5492" width="9702px" zoomAndPan="magnify"><defs><filter height="300%" id="faeu3tnqg3u61" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="608" x="4546.375" y="27.4023">GraphRAG DRIFT Search - Detailed Activity Flow (Iterative Refinement)</text><rect fill="#FAEBD7" height="5441.8562" style="stroke:#FAEBD7;stroke-width:1.0;" width="512" x="15" y="33.4961"/><ellipse cx="269" cy="69.6953" fill="#000000" filter="url(#faeu3tnqg3u61)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="48.1016" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="496" x="21" y="99.6953"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="31" y="121.2969">User executes query</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="476" x="31" y="134.9668">graphrag query 'Analyze X from multiple perspectives' --method drift</text><path d="M358,157.7969 L358,197.0732 L338,201.0732 L358,205.0732 L358,244.3496 A0,0 0 0 0 358,244.3496 L482,244.3496 A0,0 0 0 0 482,244.3496 L482,167.7969 L472,157.7969 L358,157.7969 A0,0 0 0 0 358,157.7969 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M472,157.7969 L472,167.7969 L482,167.7969 L472,157.7969 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="364" y="175.3652">- query string</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="364" y="190.6758">- root directory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="364" y="205.9863">- data directory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="364" y="221.2969">- response_type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="364" y="236.6074">- streaming flag</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="138" x="200" y="184.0068"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="210" y="205.6084">Parse CLI arguments</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="126" x="206" y="264.3496"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="216" y="285.9512">Load configuration</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="216" y="300.084">(settings.yaml)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="151" x="193.5" y="5113.2917"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="131" x="203.5" y="5134.8933">Display answer to user</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="233,5167.4246,305,5167.4246,317,5179.4246,305,5191.4246,233,5191.4246,221,5179.4246,233,5167.4246" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="233" y="5183.5818">Verbose flag?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="203" y="5177.1042">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="317" y="5177.1042">no</text><path d="M168.5,5201.4246 L168.5,5271.322 L148.5,5275.322 L168.5,5279.322 L168.5,5349.2195 A0,0 0 0 0 168.5,5349.2195 L378.5,5349.2195 A0,0 0 0 0 378.5,5349.2195 L378.5,5211.4246 L368.5,5201.4246 L168.5,5201.4246 A0,0 0 0 0 168.5,5201.4246 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M368.5,5201.4246 L368.5,5211.4246 L378.5,5211.4246 L368.5,5201.4246 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="174.5" y="5218.9929">- LLM calls: 17-130+ calls</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="182.5" y="5234.3035">- build_context: 0-100</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="182.5" y="5249.614">- primer: 10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="182.5" y="5264.9246">- action: 6-20+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="182.5" y="5280.2351">- reduce: 1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="174.5" y="5295.5457">- Prompt tokens: X</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="174.5" y="5310.8562">- Output tokens: Y</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="174.5" y="5326.1667">- Total tokens: X + Y</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="174.5" y="5341.4773">- Completion time: Z seconds</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="115" x="33.5" y="5258.2556"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="43.5" y="5279.8572">Display statistics</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="97" x="398.5" y="5201.4246"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="408.5" y="5223.0261">Skip statistics</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="269,5355.2195,281,5367.2195,269,5379.2195,257,5367.2195,269,5355.2195" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="116" x="211" y="5399.2195"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="221" y="5420.821">Exit with success</text><ellipse cx="269" cy="5464.3523" fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="269" cy="5464.3523" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="15" x2="15" y1="33.4961" y2="5475.3523"/><rect fill="#ADD8E6" height="5441.8562" style="stroke:#ADD8E6;stroke-width:1.0;" width="1165" x="527" y="33.4961"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="204" x="1005.5" y="332.6152"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184" x="1015.5" y="354.2168">Read Parquet files from output/</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="1149" x="533" y="386.748"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="143" x="545" y="419.8145"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="555" y="441.416">Load entities.parquet</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="175" x="698" y="419.8145"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="708" y="441.416">Load relationships.parquet</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="174" x="901" y="419.8145"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154" x="911" y="441.416">Load communities.parquet</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="212" x="1103" y="419.8145"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="192" x="1113" y="441.416">Load community_reports.parquet</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="157" x="1343" y="419.8145"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="1353" y="441.416">Load text_units.parquet</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="160" x="1510" y="412.748"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="1520" y="434.3496">Load covariates.parquet</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="54" x="1520" y="448.4824">(optional)</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="1149" x="533" y="481.0137"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="196" x="1009.5" y="507.0137"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="176" x="1019.5" y="528.6152">Load embedding vector stores</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="490" x="862.5" y="561.1465"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="229" x="876.5" y="587.1465"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="209" x="886.5" y="608.748">Load entity_description embeddings</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="205" x="1133.5" y="587.1465"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="185" x="1143.5" y="608.748">Load text_unit_text embeddings</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="490" x="862.5" y="641.2793"/><line style="stroke:#000000;stroke-width:2.0;" x1="527" x2="527" y1="33.4961" y2="5475.3523"/><rect fill="#90EE90" height="5441.8562" style="stroke:#90EE90;stroke-width:1.0;" width="591.5" x="1692" y="33.4961"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="239" x="1698" y="667.2793"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="219" x="1708" y="688.8809">Create DRIFTSearch engine via factory</text><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="541.4336" style="stroke:#000000;stroke-width:2.0;" width="575" x="1698.5" y="711.4121"/><path d="M1801.5,711.4121 L1801.5,720.9004 L1791.5,730.9004 L1698.5,730.9004 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1701.5" y="725.9473">Factory Setup</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="165" x="1735" y="747.9004"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145" x="1745" y="769.502">Create completion model</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="1745" y="783.6348">(LiteLLM)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="168" x="1733.5" y="816.166"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148" x="1743.5" y="837.7676">Create embedding model</text><path d="M1928,860.2988 L1928,884.2646 L1908,888.2646 L1928,892.2646 L1928,916.2305 A0,0 0 0 0 1928,916.2305 L2173,916.2305 A0,0 0 0 0 2173,916.2305 L2173,870.2988 L2163,860.2988 L1928,860.2988 A0,0 0 0 0 1928,860.2988 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2163,860.2988 L2163,870.2988 L2173,870.2988 L2163,860.2988 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1934" y="877.8672">- DRIFT_PRIMER_PROMPT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="1934" y="893.1777">- LOCAL_SEARCH_SYSTEM_PROMPT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1934" y="908.4883">- DRIFT_REDUCE_PROMPT</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="181" x="1727" y="871.1982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="161" x="1737" y="892.7998">Load DRIFT search prompts</text><path d="M1946.5,926.2305 L1946.5,950.1963 L1926.5,954.1963 L1946.5,958.1963 L1946.5,982.1621 A0,0 0 0 0 1946.5,982.1621 L2142.5,982.1621 A0,0 0 0 0 2142.5,982.1621 L2142.5,936.2305 L2132.5,926.2305 L1946.5,926.2305 A0,0 0 0 0 1946.5,926.2305 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2132.5,926.2305 L2132.5,936.2305 L2142.5,936.2305 L2132.5,926.2305 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="1952.5" y="943.7988">Combines:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1952.5" y="959.1094">- GlobalCommunityContext</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1952.5" y="974.4199">- LocalSearchMixedContext</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="218" x="1708.5" y="937.1299"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="198" x="1718.5" y="958.7314">Create DRIFTSearchContextBuilder</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="134" x="1750.5" y="1002.1621"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="1760.5" y="1023.7637">Create DRIFTPrimer</text><path d="M1927.5,1053.0508 L1927.5,1069.3613 L1907.5,1073.3613 L1927.5,1077.3613 L1927.5,1093.6719 A0,0 0 0 0 1927.5,1093.6719 L2174.5,1093.6719 A0,0 0 0 0 2174.5,1093.6719 L2174.5,1063.0508 L2164.5,1053.0508 L1927.5,1053.0508 A0,0 0 0 0 1927.5,1053.0508 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2164.5,1053.0508 L2164.5,1063.0508 L2174.5,1063.0508 L2164.5,1053.0508 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1933.5" y="1070.6191">Reuses local search implementation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1933.5" y="1085.9297">with JSON response format</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="180" x="1727.5" y="1056.2949"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="160" x="1737.5" y="1077.8965">Initialize LocalSearch engine</text><path d="M1904,1103.6719 L1904,1135.293 L1884,1139.293 L1904,1143.293 L1904,1174.9141 A0,0 0 0 0 1904,1174.9141 L2129,1174.9141 A0,0 0 0 0 2129,1174.9141 L2129,1113.6719 L2119,1103.6719 L1904,1103.6719 A0,0 0 0 0 1904,1103.6719 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2119,1103.6719 L2119,1113.6719 L2129,1113.6719 L2119,1103.6719 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="1910" y="1121.2402">Tracks:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1910" y="1136.5508">- Actions (query + answer pairs)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="1910" y="1151.8613">- Follow-up queries</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1910" y="1167.1719">- Token usage</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1751" y="1122.2266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1761" y="1143.8281">Initialize QueryState</text><path d="M1910.5,1184.9141 L1910.5,1208.8799 L1890.5,1212.8799 L1910.5,1216.8799 L1910.5,1240.8457 A0,0 0 0 0 1910.5,1240.8457 L2263.5,1240.8457 A0,0 0 0 0 2263.5,1240.8457 L2263.5,1194.9141 L2253.5,1184.9141 L1910.5,1184.9141 A0,0 0 0 0 1910.5,1184.9141 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2253.5,1184.9141 L2253.5,1194.9141 L2263.5,1194.9141 L2253.5,1184.9141 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="1916.5" y="1202.4824">- n_depth: Iteration depth (default: 2)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="1916.5" y="1217.793">- drift_k_followups: Actions per iteration (default: 3)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="1916.5" y="1233.1035">- primer_folds: Parallel primer calls (default: 10)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="146" x="1744.5" y="1195.8135"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="1754.5" y="1217.415">Set DRIFT parameters</text><line style="stroke:#000000;stroke-width:2.0;" x1="1692" x2="1692" y1="33.4961" y2="5475.3523"/><rect fill="#FFFFE0" height="5441.8562" style="stroke:#FFFFE0;stroke-width:1.0;" width="353" x="2283.5" y="33.4961"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="205" x="2289.5" y="1272.8457"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="185" x="2299.5" y="1294.4473">Start DRIFTSearch.search(query)</text><path d="M2488.5,1316.9785 L2488.5,1340.9443 L2468.5,1344.9443 L2488.5,1348.9443 L2488.5,1372.9102 A0,0 0 0 0 2488.5,1372.9102 L2631.5,1372.9102 A0,0 0 0 0 2631.5,1372.9102 L2631.5,1326.9785 L2621.5,1316.9785 L2488.5,1316.9785 A0,0 0 0 0 2488.5,1316.9785 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2621.5,1316.9785 L2621.5,1326.9785 L2631.5,1326.9785 L2621.5,1316.9785 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="2494.5" y="1334.5469">llm_calls = {}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="2494.5" y="1349.8574">prompt_tokens = {}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="2494.5" y="1365.168">output_tokens = {}</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="153" x="2315.5" y="1327.8779"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133" x="2325.5" y="1349.4795">Initialize token tracking</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="2342,1392.9102,2442,1392.9102,2454,1404.9102,2442,1416.9102,2342,1416.9102,2330,1404.9102,2342,1392.9102" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="2342" y="1409.0674">QueryState empty?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="2312" y="1402.5898">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="2454" y="1402.5898">no</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="2392,2426.5225,2404,2438.5225,2392,2450.5225,2380,2438.5225,2392,2426.5225" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2283.5" x2="2283.5" y1="33.4961" y2="5475.3523"/><rect fill="#F08080" height="5441.8562" style="stroke:#F08080;stroke-width:1.0;" width="607" x="2636.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="979.6123" style="stroke:#000000;stroke-width:2.0;" width="591" x="2642.5" y="1436.9102"/><path d="M2876.5,1436.9102 L2876.5,1446.3984 L2866.5,1456.3984 L2642.5,1456.3984 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="2645.5" y="1451.4453">Primer - Generate Initial Context</text><path d="M2956.5,1473.3984 L2956.5,1505.0195 L2936.5,1509.0195 L2956.5,1513.0195 L2956.5,1544.6406 A0,0 0 0 0 2956.5,1544.6406 L3211.5,1544.6406 A0,0 0 0 0 3211.5,1544.6406 L3211.5,1483.3984 L3201.5,1473.3984 L2956.5,1473.3984 A0,0 0 0 0 2956.5,1473.3984 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M3201.5,1473.3984 L3201.5,1483.3984 L3211.5,1483.3984 L3201.5,1473.3984 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="2962.5" y="1490.9668">Uses GlobalCommunityContext</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="2962.5" y="1506.2773">- Selects relevant community reports</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="2962.5" y="1521.5879">- Can use dynamic selection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="2962.5" y="1536.8984">- Returns top-k reports</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="261" x="2675.5" y="1491.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="241" x="2685.5" y="1513.5547">Build global context (community selection)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="176" x="2718" y="1564.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156" x="2728" y="1586.2422">Track build_context tokens</text><path d="M2932.5,1608.7734 L2932.5,1632.7393 L2912.5,1636.7393 L2932.5,1640.7393 L2932.5,1664.7051 A0,0 0 0 0 2932.5,1664.7051 L3174.5,1664.7051 A0,0 0 0 0 3174.5,1664.7051 L3174.5,1618.7734 L3164.5,1608.7734 L2932.5,1608.7734 A0,0 0 0 0 2932.5,1608.7734 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M3164.5,1608.7734 L3164.5,1618.7734 L3174.5,1618.7734 L3164.5,1608.7734 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="2938.5" y="1626.3418">Split into primer_folds (default: 10)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="2938.5" y="1641.6523">Enables parallel processing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="2938.5" y="1656.9629">Each fold gets subset of reports</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="213" x="2699.5" y="1619.6729"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="193" x="2709.5" y="1641.2744">Split community reports into folds</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="571" x="2652.5" y="1684.7051"/><line style="stroke:#000000;stroke-width:2.0;" x1="2636.5" x2="2636.5" y1="33.4961" y2="5475.3523"/><rect fill="#F08080" height="5441.8562" style="stroke:#F08080;stroke-width:1.0;" width="512" x="3243.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="979.6123" style="stroke:#000000;stroke-width:2.0;" width="496" x="3249.5" y="1436.9102"/><path d="M3483.5,1436.9102 L3483.5,1446.3984 L3473.5,1456.3984 L3249.5,1456.3984 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="3252.5" y="1451.4453">Primer - Generate Initial Context</text><path d="M3499.5,1700.7051 L3499.5,1724.6709 L3479.5,1728.6709 L3499.5,1732.6709 L3499.5,1756.6367 A0,0 0 0 0 3499.5,1756.6367 L3733.5,1756.6367 A0,0 0 0 0 3733.5,1756.6367 L3733.5,1710.7051 L3723.5,1700.7051 L3499.5,1700.7051 A0,0 0 0 0 3499.5,1700.7051 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M3723.5,1700.7051 L3723.5,1710.7051 L3733.5,1710.7051 L3723.5,1700.7051 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="3505.5" y="1718.2734">System: DRIFT_PRIMER_PROMPT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="3505.5" y="1733.584">- Query</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="3505.5" y="1748.8945">- Community reports for this fold</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="202" x="3277.5" y="1711.6045"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="3287.5" y="1733.2061">Format DRIFT_PRIMER_PROMPT</text><path d="M3515.5,1789.6025 L3515.5,1836.5342 L3495.5,1840.5342 L3515.5,1844.5342 L3515.5,1891.4658 A0,0 0 0 0 3515.5,1891.4658 L3722.5,1891.4658 A0,0 0 0 0 3722.5,1891.4658 L3722.5,1799.6025 L3712.5,1789.6025 L3515.5,1789.6025 A0,0 0 0 0 3515.5,1789.6025 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M3712.5,1789.6025 L3712.5,1799.6025 L3722.5,1799.6025 L3712.5,1789.6025 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="3521.5" y="1807.1709">Structured output:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="3521.5" y="1822.4814">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="3529.5" y="1837.792">"intermediate_answer": str,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="3529.5" y="1853.1025">"score": int (0-100),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="3529.5" y="1868.4131">"follow_up_queries": [str, ...]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="3521.5" y="1883.7236">}</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="234" x="3261.5" y="1823.4678"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="214" x="3271.5" y="1845.0693">Call LLM with PrimerResponse format</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="150" x="3303.5" y="1926.4658"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="3313.5" y="1948.0674">Parse PrimerResponse</text><line style="stroke:#000000;stroke-width:2.0;" x1="3243.5" x2="3243.5" y1="33.4961" y2="5475.3523"/><rect fill="#F08080" height="5441.8562" style="stroke:#F08080;stroke-width:1.0;" width="253" x="3755.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="979.6123" style="stroke:#000000;stroke-width:2.0;" width="237" x="3761.5" y="1436.9102"/><path d="M3995.5,1436.9102 L3995.5,1446.3984 L3985.5,1456.3984 L3761.5,1456.3984 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="3764.5" y="1451.4453">Primer - Generate Initial Context</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="202" x="3784.5" y="1745.4697"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="3794.5" y="1767.0713">Format DRIFT_PRIMER_PROMPT</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="67" x="3852" y="1812.5684"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="3862" y="1834.1699">Call LLM</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="150" x="3810.5" y="1881.7012"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="3820.5" y="1903.3027">Parse PrimerResponse</text><line style="stroke:#000000;stroke-width:2.0;" x1="3755.5" x2="3755.5" y1="33.4961" y2="5475.3523"/><rect fill="#F08080" height="5441.8562" style="stroke:#F08080;stroke-width:1.0;" width="253" x="4008.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="979.6123" style="stroke:#000000;stroke-width:2.0;" width="237" x="4014.5" y="1436.9102"/><path d="M4248.5,1436.9102 L4248.5,1446.3984 L4238.5,1456.3984 L4014.5,1456.3984 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="4017.5" y="1451.4453">Primer - Generate Initial Context</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="202" x="4037.5" y="1745.4697"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="4047.5" y="1767.0713">Format DRIFT_PRIMER_PROMPT</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="67" x="4105" y="1812.5684"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="4115" y="1834.1699">Call LLM</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="150" x="4063.5" y="1881.7012"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="4073.5" y="1903.3027">Parse PrimerResponse</text><line style="stroke:#000000;stroke-width:2.0;" x1="4008.5" x2="4008.5" y1="33.4961" y2="5475.3523"/><rect fill="#F08080" height="5441.8562" style="stroke:#F08080;stroke-width:1.0;" width="824" x="4261.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="979.6123" style="stroke:#000000;stroke-width:2.0;" width="576" x="4267.5" y="1436.9102"/><path d="M4501.5,1436.9102 L4501.5,1446.3984 L4491.5,1456.3984 L4267.5,1456.3984 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="4270.5" y="1451.4453">Primer - Generate Initial Context</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="556" x="4277.5" y="1980.5986"/><path d="M4526,1996.5986 L4526,2028.2197 L4506,2032.2197 L4526,2036.2197 L4526,2067.8408 A0,0 0 0 0 4526,2067.8408 L4771,2067.8408 A0,0 0 0 0 4771,2067.8408 L4771,2006.5986 L4761,1996.5986 L4526,1996.5986 A0,0 0 0 0 4526,1996.5986 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M4761,1996.5986 L4761,2006.5986 L4771,2006.5986 L4761,1996.5986 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="4532" y="2014.167">Each response contains:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="4532" y="2029.4775">- intermediate_answer (2000 chars)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="4532" y="2044.7881">- score (relevance 0-100)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="4532" y="2060.0986">- follow_up_queries (5+)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="181" x="4325" y="2015.1533"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="161" x="4335" y="2036.7549">Collect all primer responses</text><path d="M4504.5,2077.8408 L4504.5,2101.8066 L4484.5,2105.8066 L4504.5,2109.8066 L4504.5,2133.7725 A0,0 0 0 0 4504.5,2133.7725 L4805.5,2133.7725 A0,0 0 0 0 4805.5,2133.7725 L4805.5,2087.8408 L4795.5,2077.8408 L4504.5,2077.8408 A0,0 0 0 0 4504.5,2077.8408 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M4795.5,2077.8408 L4795.5,2087.8408 L4805.5,2087.8408 L4795.5,2077.8408 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="4510.5" y="2095.4092">llm_calls["primer"] = primer_folds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="4510.5" y="2110.7197">prompt_tokens["primer"] = sum(all prompts)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="4510.5" y="2126.0303">output_tokens["primer"] = sum(all outputs)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="138" x="4346.5" y="2088.7402"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="4356.5" y="2110.3418">Track primer tokens</text><path d="M4510,2143.7725 L4510,2167.7383 L4490,2171.7383 L4510,2175.7383 L4510,2199.7041 A0,0 0 0 0 4510,2199.7041 L4737,2199.7041 A0,0 0 0 0 4737,2199.7041 L4737,2153.7725 L4727,2143.7725 L4510,2143.7725 A0,0 0 0 0 4510,2143.7725 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M4727,2143.7725 L4727,2153.7725 L4737,2153.7725 L4727,2143.7725 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="4516" y="2161.3408">- Combine intermediate answers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="4516" y="2176.6514">- Extract all follow-up queries</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="4516" y="2191.9619">- Calculate average score</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="149" x="4341" y="2154.6719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="4351" y="2176.2734">Process primer results</text><path d="M4513.5,2209.7041 L4513.5,2248.9805 L4493.5,2252.9805 L4513.5,2256.9805 L4513.5,2296.2568 A0,0 0 0 0 4513.5,2296.2568 L4798.5,2296.2568 A0,0 0 0 0 4798.5,2296.2568 L4798.5,2219.7041 L4788.5,2209.7041 L4513.5,2209.7041 A0,0 0 0 0 4513.5,2209.7041 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M4788.5,2209.7041 L4788.5,2219.7041 L4798.5,2219.7041 L4788.5,2209.7041 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="4519.5" y="2227.2725">DriftAction:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="4519.5" y="2242.583">- query: original query</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="4519.5" y="2257.8936">- answer: combined intermediate answers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="4519.5" y="2273.2041">- score: average</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="4519.5" y="2288.5146">- follow_ups: list of follow-up queries</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="156" x="4337.5" y="2235.9141"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="136" x="4347.5" y="2257.5156">Create initial DriftAction</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="197" x="4317" y="2316.2568"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="177" x="4327" y="2337.8584">Add initial action to QueryState</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="230" x="4300.5" y="2370.3896"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="210" x="4310.5" y="2391.9912">Add follow-ups to QueryState queue</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="222" x="4853.5" y="1436.9102"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="4863.5" y="1458.5117">Skip primer (resume existing state)</text><line style="stroke:#000000;stroke-width:2.0;" x1="4261.5" x2="4261.5" y1="33.4961" y2="5475.3523"/><rect fill="#B0C4DE" height="5441.8562" style="stroke:#B0C4DE;stroke-width:1.0;" width="794.5" x="5085.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="1436.0583" style="stroke:#000000;stroke-width:2.0;" width="778.5" x="5091.5" y="2460.5225"/><path d="M5216.5,2460.5225 L5216.5,2470.0107 L5206.5,2480.0107 L5091.5,2480.0107 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="5094.5" y="2475.0576">Main DRIFT Loop</text><path d="M5621,2496.7666 L5621,2513.0771 L5601,2517.0771 L5621,2521.0771 L5621,2537.3877 A0,0 0 0 0 5621,2537.3877 L5775,2537.3877 A0,0 0 0 0 5775,2537.3877 L5775,2506.7666 L5765,2496.7666 L5621,2496.7666 A0,0 0 0 0 5621,2496.7666 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M5765,2496.7666 L5765,2506.7666 L5775,2506.7666 L5765,2496.7666 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="5627" y="2514.335">epochs = 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="5627" y="2529.6455">n_depth = 2 (default)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="152" x="5449" y="2500.0107"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="5459" y="2521.6123">Initialize loop variables</text><path d="M5625,2591.3877 L5625,2630.6641 L5605,2634.6641 L5625,2638.6641 L5625,2677.9404 A0,0 0 0 0 5625,2677.9404 L5858,2677.9404 A0,0 0 0 0 5858,2677.9404 L5858,2601.3877 L5848,2591.3877 L5625,2591.3877 A0,0 0 0 0 5625,2591.3877 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M5848,2591.3877 L5848,2601.3877 L5858,2601.3877 L5848,2591.3877 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="5631" y="2608.9561">Sort by:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="5631" y="2624.2666">1. Score (descending)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="5631" y="2639.5771">2. Depth (prefer shallower)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="5635" y="2654.8877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="5631" y="2670.1982">Selects actions that need answers</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="160" x="5445" y="2617.5977"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="5455" y="2639.1992">Rank incomplete actions</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="5477.5,2697.9404,5572.5,2697.9404,5584.5,2709.9404,5572.5,2721.9404,5477.5,2721.9404,5465.5,2709.9404,5477.5,2697.9404" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="5477.5" y="2714.0977">Actions available?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="5447.5" y="2707.6201">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="5584.5" y="2707.6201">no</text><path d="M5268.5,2741.9404 L5268.5,2758.251 L5248.5,2762.251 L5268.5,2766.251 L5268.5,2782.5615 A0,0 0 0 0 5268.5,2782.5615 L5498.5,2782.5615 A0,0 0 0 0 5498.5,2782.5615 L5498.5,2751.9404 L5488.5,2741.9404 L5268.5,2741.9404 A0,0 0 0 0 5268.5,2741.9404 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M5488.5,2741.9404 L5488.5,2751.9404 L5498.5,2751.9404 L5488.5,2741.9404 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="5274.5" y="2759.5088">k = drift_k_followups (default: 3)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="5274.5" y="2774.8193">Limits concurrent searches</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="134" x="5114.5" y="2745.1846"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="5124.5" y="2766.7861">Select top-k actions</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="5525,2557.3877,5537,2569.3877,5525,2581.3877,5513,2569.3877,5525,2557.3877" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="5525,3693.0361,5537,3705.0361,5525,3717.0361,5513,3705.0361,5525,3693.0361" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.0;" x1="5085.5" x2="5085.5" y1="33.4961" y2="5475.3523"/><rect fill="#B0C4DE" height="5441.8562" style="stroke:#B0C4DE;stroke-width:1.0;" width="83" x="5880" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="1436.0583" style="stroke:#000000;stroke-width:2.0;" width="67" x="5886" y="2460.5225"/><path d="M6011,2460.5225 L6011,2470.0107 L6001,2480.0107 L5886,2480.0107 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="5889" y="2475.0576">Main DRIFT Loop</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="43" x="5898" y="2805.8057"/><line style="stroke:#000000;stroke-width:2.0;" x1="5880" x2="5880" y1="33.4961" y2="5475.3523"/><rect fill="#E6E6FA" height="5441.8562" style="stroke:#E6E6FA;stroke-width:1.0;" width="584" x="5963" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="1436.0583" style="stroke:#000000;stroke-width:2.0;" width="568" x="5969" y="2460.5225"/><path d="M6094,2460.5225 L6094,2470.0107 L6084,2480.0107 L5969,2480.0107 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="5972" y="2475.0576">Main DRIFT Loop</text><path d="M6265,2831.8057 L6265,2871.082 L6245,2875.082 L6265,2879.082 L6265,2918.3584 A0,0 0 0 0 6265,2918.3584 L6525,2918.3584 A0,0 0 0 0 6525,2918.3584 L6525,2841.8057 L6515,2831.8057 L6265,2831.8057 A0,0 0 0 0 6265,2831.8057 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M6515,2831.8057 L6515,2841.8057 L6525,2841.8057 L6515,2831.8057 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="6271" y="2849.374">LocalSearch process:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="6271" y="2864.6846">1. Entity mapping (vector search)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="6271" y="2879.9951">2. Graph traversal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="6271" y="2895.3057">3. Context building (multi-source)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="6271" y="2910.6162">4. LLM generation with JSON response</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="264" x="5981" y="2858.0156"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="244" x="5991" y="2879.6172">Execute LocalSearch for follow-up query 1</text><path d="M6203.5,2953.3584 L6203.5,3000.29 L6183.5,3004.29 L6203.5,3008.29 L6203.5,3055.2217 A0,0 0 0 0 6203.5,3055.2217 L6410.5,3055.2217 A0,0 0 0 0 6410.5,3055.2217 L6410.5,2963.3584 L6400.5,2953.3584 L6203.5,2953.3584 A0,0 0 0 0 6203.5,2953.3584 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M6400.5,2953.3584 L6400.5,2963.3584 L6410.5,2963.3584 L6400.5,2953.3584 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="6209.5" y="2970.9268">Expected format:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="6209.5" y="2986.2373">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="6217.5" y="3001.5479">"response": str,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="6217.5" y="3016.8584">"score": float,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="6217.5" y="3032.1689">"follow_up_queries": [str, ...]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="6209.5" y="3047.4795">}</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="141" x="6042.5" y="2987.2236"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="6052.5" y="3008.8252">Parse JSON response</text><path d="M6196,3090.2217 L6196,3121.8428 L6176,3125.8428 L6196,3129.8428 L6196,3161.4639 A0,0 0 0 0 6196,3161.4639 L6376,3161.4639 A0,0 0 0 0 6376,3161.4639 L6376,3100.2217 L6366,3090.2217 L6196,3090.2217 A0,0 0 0 0 6196,3090.2217 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M6366,3090.2217 L6366,3100.2217 L6376,3100.2217 L6366,3090.2217 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="6202" y="3107.79">- Set answer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="6202" y="3123.1006">- Set score</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="6202" y="3138.4111">- Extract new follow-ups</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="6202" y="3153.7217">- Track tokens</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="126" x="6050" y="3108.7764"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="6060" y="3130.3779">Update DriftAction</text><line style="stroke:#000000;stroke-width:2.0;" x1="5963" x2="5963" y1="33.4961" y2="5475.3523"/><rect fill="#E6E6FA" height="5441.8562" style="stroke:#E6E6FA;stroke-width:1.0;" width="315" x="6547" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="1436.0583" style="stroke:#000000;stroke-width:2.0;" width="299" x="6553" y="2460.5225"/><path d="M6678,2460.5225 L6678,2470.0107 L6668,2480.0107 L6553,2480.0107 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="6556" y="2475.0576">Main DRIFT Loop</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="264" x="6576" y="2910.4355"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="244" x="6586" y="2932.0371">Execute LocalSearch for follow-up query 2</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="141" x="6637.5" y="2979.5684"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="6647.5" y="3001.1699">Parse JSON response</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="126" x="6645" y="3048.7012"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="6655" y="3070.3027">Update DriftAction</text><line style="stroke:#000000;stroke-width:2.0;" x1="6547" x2="6547" y1="33.4961" y2="5475.3523"/><rect fill="#E6E6FA" height="5441.8562" style="stroke:#E6E6FA;stroke-width:1.0;" width="1125.5" x="6862" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="1436.0583" style="stroke:#000000;stroke-width:2.0;" width="1109.5" x="6868" y="2460.5225"/><path d="M6993,2460.5225 L6993,2470.0107 L6983,2480.0107 L6868,2480.0107 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="6871" y="2475.0576">Main DRIFT Loop</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="264" x="7320.5" y="2910.4355"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="244" x="7330.5" y="2932.0371">Execute LocalSearch for follow-up query 3</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="141" x="7382" y="2979.5684"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="7392" y="3001.1699">Parse JSON response</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="126" x="7389.5" y="3048.7012"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="7399.5" y="3070.3027">Update DriftAction</text><rect fill="#000000" filter="url(#faeu3tnqg3u61)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="718.5" x="6880" y="3181.4639"/><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="155" x="6943" y="3207.4639"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="6953" y="3229.0654">Collect all action results</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="172" x="6934.5" y="3305.5967"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="152" x="6944.5" y="3327.1982">For each completed action</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="163" x="6939" y="3359.7295"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="143" x="6949" y="3381.3311">Add action to QueryState</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="235" x="6903" y="3418.1182"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="215" x="6913" y="3439.7197">Extract follow-up queries from action</text><path d="M7155.5,3469.0068 L7155.5,3485.3174 L7135.5,3489.3174 L7155.5,3493.3174 L7155.5,3509.6279 A0,0 0 0 0 7155.5,3509.6279 L7402.5,3509.6279 A0,0 0 0 0 7402.5,3509.6279 L7402.5,3479.0068 L7392.5,3469.0068 L7155.5,3469.0068 A0,0 0 0 0 7155.5,3469.0068 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M7392.5,3469.0068 L7392.5,3479.0068 L7402.5,3479.0068 L7392.5,3469.0068 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="7161.5" y="3486.5752">New follow-ups become candidates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="7161.5" y="3501.8857">for next iteration</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="230" x="6905.5" y="3472.251"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="210" x="6915.5" y="3493.8525">Add follow-ups to QueryState queue</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="7020.5,3261.5967,7032.5,3273.5967,7020.5,3285.5967,7008.5,3273.5967,7020.5,3261.5967" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="6983.5,3529.6279,7057.5,3529.6279,7069.5,3541.6279,7057.5,3553.6279,6983.5,3553.6279,6971.5,3541.6279,6983.5,3529.6279" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="6983.5" y="3545.7852">More actions?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="7069.5" y="3539.3076">yes</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="122" x="6959.5" y="3594.9033"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="102" x="6969.5" y="3616.5049">Increment epochs</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="178" x="7618.5" y="2741.9404"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="7628.5" y="2763.542">No more actions to process</text><path d="M7797.5,2799.3174 L7797.5,2815.6279 L7777.5,2819.6279 L7797.5,2823.6279 L7797.5,2839.9385 A0,0 0 0 0 7797.5,2839.9385 L7965.5,2839.9385 A0,0 0 0 0 7965.5,2839.9385 L7965.5,2809.3174 L7955.5,2799.3174 L7797.5,2799.3174 A0,0 0 0 0 7797.5,2799.3174 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M7955.5,2799.3174 L7955.5,2809.3174 L7965.5,2809.3174 L7955.5,2799.3174 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="7803.5" y="2816.8857">All queries answered or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="7803.5" y="2832.1963">no viable follow-ups</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="140" x="7637.5" y="2802.5615"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="7647.5" y="2824.1631">Exit DRIFT loop early</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="7312.5,3649.0361,7415.5,3649.0361,7427.5,3661.0361,7415.5,3673.0361,7312.5,3673.0361,7300.5,3661.0361,7312.5,3649.0361" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="7312.5" y="3665.1934">epochs &lt; n_depth?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="7427.5" y="3658.7158">yes</text><path d="M7476,3747.407 L7476,3771.3728 L7456,3775.3728 L7476,3779.3728 L7476,3803.3386 A0,0 0 0 0 7476,3803.3386 L7775,3803.3386 A0,0 0 0 0 7775,3803.3386 L7775,3757.407 L7765,3747.407 L7476,3747.407 A0,0 0 0 0 7476,3747.407 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M7765,3747.407 L7765,3757.407 L7775,3757.407 L7765,3747.407 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="7482" y="3764.9753">llm_calls["action"] = sum(all local searches)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="7482" y="3780.2859">prompt_tokens["action"] = sum(all prompts)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="7482" y="3795.5964">output_tokens["action"] = sum(all outputs)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="184" x="7272" y="3758.3064"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="164" x="7282" y="3779.908">Calculate action token usage</text><path d="M7451,3813.3386 L7451,3844.9597 L7431,3848.9597 L7451,3852.9597 L7451,3884.5808 A0,0 0 0 0 7451,3884.5808 L7745,3884.5808 A0,0 0 0 0 7745,3884.5808 L7745,3823.3386 L7735,3813.3386 L7451,3813.3386 A0,0 0 0 0 7451,3813.3386 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M7735,3813.3386 L7735,3823.3386 L7745,3823.3386 L7735,3813.3386 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="7457" y="3830.907">Extract:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="7457" y="3846.2175">- All answers (graph of responses)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="7457" y="3861.5281">- Context data (entities, relationships, etc.)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="7457" y="3876.8386">- Context text (formatted)</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="134" x="7297" y="3831.8933"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="7307" y="3853.4949">Serialize QueryState</text><line style="stroke:#000000;stroke-width:2.0;" x1="6862" x2="6862" y1="33.4961" y2="5475.3523"/><rect fill="#FAFAD2" height="5441.8562" style="stroke:#FAFAD2;stroke-width:1.0;" width="1069.75" x="7987.5" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="775.5" style="stroke:#000000;stroke-width:2.0;" width="1053.75" x="7993.5" y="3906.5808"/><path d="M8234.5,3906.5808 L8234.5,3916.0691 L8224.5,3926.0691 L7993.5,3926.0691 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="7996.5" y="3921.116">Reduce - Synthesize Final Answer</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="8421.5,3943.0691,8510.5,3943.0691,8522.5,3955.0691,8510.5,3967.0691,8421.5,3967.0691,8409.5,3955.0691,8421.5,3943.0691" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="8421.5" y="3959.2263">Reduce enabled?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="8391.5" y="3952.7488">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="8522.5" y="3952.7488">no</text><path d="M8325.25,3977.0691 L8325.25,4001.0349 L8305.25,4005.0349 L8325.25,4009.0349 L8325.25,4033.0007 A0,0 0 0 0 8325.25,4033.0007 L8529.25,4033.0007 A0,0 0 0 0 8529.25,4033.0007 L8529.25,3987.0691 L8519.25,3977.0691 L8325.25,3977.0691 A0,0 0 0 0 8325.25,3977.0691 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M8519.25,3977.0691 L8519.25,3987.0691 L8529.25,3987.0691 L8519.25,3977.0691 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="8331.25" y="3994.6375">Traverse query graph</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="8331.25" y="4009.948">Collect all completed actions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="8331.25" y="4025.2585">Format as list of answers</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="225" x="8080.25" y="3987.9685"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="205" x="8090.25" y="4009.5701">Extract all answers from QueryState</text><path d="M8285.75,4043.0007 L8285.75,4082.2771 L8265.75,4086.2771 L8285.75,4090.2771 L8285.75,4129.5535 A0,0 0 0 0 8285.75,4129.5535 L8531.75,4129.5535 A0,0 0 0 0 8531.75,4129.5535 L8531.75,4053.0007 L8521.75,4043.0007 L8285.75,4043.0007 A0,0 0 0 0 8285.75,4043.0007 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M8521.75,4043.0007 L8521.75,4053.0007 L8531.75,4053.0007 L8521.75,4043.0007 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="8291.75" y="4060.5691">DRIFT_REDUCE_PROMPT format:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="8291.75" y="4075.8796">- System: Reduce instruction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="8291.75" y="4091.1902">- Context: All intermediate answers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="8291.75" y="4106.5007">- response_type parameter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="8291.75" y="4121.8113">- User: Original query</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="146" x="8119.75" y="4069.2107"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="8129.75" y="4090.8123">Build REDUCE prompt</text><path d="M8284.25,4139.5535 L8284.25,4163.5193 L8264.25,4167.5193 L8284.25,4171.5193 L8284.25,4195.4851 A0,0 0 0 0 8284.25,4195.4851 L8528.25,4195.4851 A0,0 0 0 0 8528.25,4195.4851 L8528.25,4149.5535 L8518.25,4139.5535 L8284.25,4139.5535 A0,0 0 0 0 8284.25,4139.5535 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M8518.25,4139.5535 L8518.25,4149.5535 L8528.25,4149.5535 L8518.25,4139.5535 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="8290.25" y="4157.1218">Model parameters:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="8290.25" y="4172.4324">- reduce_temperature (from config)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="8290.25" y="4187.7429">- reduce_max_completion_tokens</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="143" x="8121.25" y="4150.4529"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="8131.25" y="4172.0544">Call LLM for synthesis</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="8163.25,4215.4851,8222.25,4215.4851,8234.25,4227.4851,8222.25,4239.4851,8163.25,4239.4851,8151.25,4227.4851,8163.25,4215.4851" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="8163.25" y="4231.6423">Streaming?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="8133.25" y="4225.1648">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="8234.25" y="4225.1648">no</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="138" x="8017" y="4303.6179"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="8027" y="4325.2195">Receive token chunk</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="120" x="8026" y="4357.7507"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="100" x="8036" y="4379.3523">Yield token to CLI</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="161" x="8005.5" y="4411.8835"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="8015.5" y="4433.4851">Append to full_response</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="8086,4249.4851,8098,4261.4851,8086,4273.4851,8074,4261.4851,8086,4249.4851" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="8050.5,4466.0164,8121.5,4466.0164,8133.5,4478.0164,8121.5,4490.0164,8050.5,4490.0164,8038.5,4478.0164,8050.5,4466.0164" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="8050.5" y="4482.1736">More tokens?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="8133.5" y="4475.696">yes</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="178" x="8210.5" y="4249.4851"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="8220.5" y="4271.0867">Receive complete response</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="8192.75,4496.0164,8204.75,4508.0164,8192.75,4520.0164,8180.75,4508.0164,8192.75,4496.0164" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="8166.75" y="4505.696">no</text><path d="M8282.25,4530.0164 L8282.25,4553.9822 L8262.25,4557.9822 L8282.25,4561.9822 L8282.25,4585.948 A0,0 0 0 0 8282.25,4585.948 L8613.25,4585.948 A0,0 0 0 0 8613.25,4585.948 L8613.25,4540.0164 L8603.25,4530.0164 L8282.25,4530.0164 A0,0 0 0 0 8282.25,4530.0164 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M8603.25,4530.0164 L8603.25,4540.0164 L8613.25,4540.0164 L8603.25,4530.0164 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="8288.25" y="4547.5847">llm_calls["reduce"] = 1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="8288.25" y="4562.8953">prompt_tokens["reduce"] = reduce prompt length</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="8288.25" y="4578.2058">output_tokens["reduce"] = response length</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="139" x="8123.25" y="4540.9158"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="8133.25" y="4562.5173">Track reduce tokens</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="158" x="8113.75" y="4605.948"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="138" x="8123.75" y="4627.5496">Store reduced response</text><path d="M8855.25,3977.0691 L8855.25,3993.3796 L8835.25,3997.3796 L8855.25,4001.3796 L8855.25,4017.6902 A0,0 0 0 0 8855.25,4017.6902 L9035.25,4017.6902 A0,0 0 0 0 9035.25,4017.6902 L9035.25,3987.0691 L9025.25,3977.0691 L8855.25,3977.0691 A0,0 0 0 0 8855.25,3977.0691 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M9025.25,3977.0691 L9025.25,3987.0691 L9035.25,3987.0691 L9025.25,3977.0691 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="8861.25" y="3994.6375">No synthesis</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="8861.25" y="4009.948">Returns all answers as-is</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="212" x="8623.25" y="3980.3132"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="192" x="8633.25" y="4001.9148">Return raw QueryState responses</text><polygon fill="#FEFECE" filter="url(#faeu3tnqg3u61)" points="8466,4646.0808,8478,4658.0808,8466,4670.0808,8454,4658.0808,8466,4646.0808" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.0;" x1="7987.5" x2="7987.5" y1="33.4961" y2="5475.3523"/><rect fill="#98FB98" height="5441.8562" style="stroke:#98FB98;stroke-width:1.0;" width="625.5" x="9057.25" y="33.4961"/><rect fill="#FFFFFF" filter="url(#faeu3tnqg3u61)" height="401.2109" style="stroke:#000000;stroke-width:2.0;" width="609.5" x="9063.25" y="4692.0808"/><path d="M9210.25,4692.0808 L9210.25,4701.5691 L9200.25,4711.5691 L9063.25,4711.5691 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="9066.25" y="4706.616">Create SearchResult</text><path d="M9291.75,4721.5691 L9291.75,4806.7771 L9271.75,4810.7771 L9291.75,4814.7771 L9291.75,4899.9851 A0,0 0 0 0 9291.75,4899.9851 L9662.75,4899.9851 A0,0 0 0 0 9662.75,4899.9851 L9662.75,4731.5691 L9652.75,4721.5691 L9291.75,4721.5691 A0,0 0 0 0 9291.75,4721.5691 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M9652.75,4721.5691 L9652.75,4731.5691 L9662.75,4731.5691 L9652.75,4721.5691 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="9297.75" y="4739.1375">SearchResult contains:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="9297.75" y="4754.448">- response: Final synthesized answer OR raw responses</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="9297.75" y="4769.7585">- context_data: Graph of all context used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="9297.75" y="4785.0691">- context_text: Formatted context</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="9297.75" y="4800.3796">- completion_time: total duration (float)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339" x="9297.75" y="4815.6902">- llm_calls: build_context + primer + action + reduce</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="9297.75" y="4831.0007">- prompt_tokens: sum(all phases)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="9297.75" y="4846.3113">- output_tokens: sum(all phases)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="9297.75" y="4861.6218">- llm_calls_categories: per-phase breakdown</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="9297.75" y="4876.9324">- prompt_tokens_categories: per-phase breakdown</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="9297.75" y="4892.2429">- output_tokens_categories: per-phase breakdown</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="193" x="9078.75" y="4793.7107"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="173" x="9088.75" y="4815.3123">Assemble SearchResult object</text><path d="M9272.25,4909.9851 L9272.25,4964.572 L9252.25,4968.572 L9272.25,4972.572 L9272.25,5027.1589 A0,0 0 0 0 9272.25,5027.1589 L9572.25,5027.1589 A0,0 0 0 0 9572.25,5027.1589 L9572.25,4919.9851 L9562.25,4909.9851 L9272.25,4909.9851 A0,0 0 0 0 9272.25,4909.9851 " fill="#FBFB77" filter="url(#faeu3tnqg3u61)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M9562.25,4909.9851 L9562.25,4919.9851 L9572.25,4919.9851 L9562.25,4909.9851 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="9278.25" y="4927.5535">Example breakdown:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="9278.25" y="4942.864">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="9286.25" y="4958.1746">"build_context": 0-100 (dynamic selection)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="9286.25" y="4973.4851">"primer": 10 (primer_folds)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="9286.25" y="4988.7957">"action": 6-20+ (local searches)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="9286.25" y="5004.1062">"reduce": 1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="9278.25" y="5019.4167">}</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="154" x="9098.25" y="4951.5056"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134" x="9108.25" y="4973.1072">Calculate total statistics</text><rect fill="#FEFECE" filter="url(#faeu3tnqg3u61)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="204" x="9073.25" y="5047.1589"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184" x="9083.25" y="5068.7605">Return SearchResult to API layer</text><line style="stroke:#000000;stroke-width:2.0;" x1="9057.25" x2="9057.25" y1="33.4961" y2="5475.3523"/><line style="stroke:#000000;stroke-width:2.0;" x1="9682.75" x2="9682.75" y1="33.4961" y2="5475.3523"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="79.6953" y2="99.6953"/><polygon fill="#A80036" points="265,89.6953,269,99.6953,273,89.6953,269,93.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="147.7969" y2="184.0068"/><polygon fill="#A80036" points="265,174.0068,269,184.0068,273,174.0068,269,178.0068" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="218.1396" y2="264.3496"/><polygon fill="#A80036" points="265,254.3496,269,264.3496,273,254.3496,269,258.3496" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="221" x2="91" y1="5179.4246" y2="5179.4246"/><line style="stroke:#A80036;stroke-width:1.5;" x1="91" x2="91" y1="5179.4246" y2="5258.2556"/><polygon fill="#A80036" points="87,5248.2556,91,5258.2556,95,5248.2556,91,5252.2556" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="317" x2="447" y1="5179.4246" y2="5179.4246"/><line style="stroke:#A80036;stroke-width:1.5;" x1="447" x2="447" y1="5179.4246" y2="5201.4246"/><polygon fill="#A80036" points="443,5191.4246,447,5201.4246,451,5191.4246,447,5195.4246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="91" x2="91" y1="5292.3884" y2="5367.2195"/><line style="stroke:#A80036;stroke-width:1.5;" x1="91" x2="257" y1="5367.2195" y2="5367.2195"/><polygon fill="#A80036" points="247,5363.2195,257,5367.2195,247,5371.2195,251,5367.2195" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="447" x2="447" y1="5235.5574" y2="5367.2195"/><line style="stroke:#A80036;stroke-width:1.5;" x1="447" x2="281" y1="5367.2195" y2="5367.2195"/><polygon fill="#A80036" points="291,5363.2195,281,5367.2195,291,5371.2195,287,5367.2195" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="5147.4246" y2="5167.4246"/><polygon fill="#A80036" points="265,5157.4246,269,5167.4246,273,5157.4246,269,5161.4246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="5379.2195" y2="5399.2195"/><polygon fill="#A80036" points="265,5389.2195,269,5399.2195,273,5389.2195,269,5393.2195" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="5433.3523" y2="5453.3523"/><polygon fill="#A80036" points="265,5443.3523,269,5453.3523,273,5443.3523,269,5447.3523" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="616.5" x2="616.5" y1="392.748" y2="419.8145"/><polygon fill="#A80036" points="612.5,409.8145,616.5,419.8145,620.5,409.8145,616.5,413.8145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="785.5" x2="785.5" y1="392.748" y2="419.8145"/><polygon fill="#A80036" points="781.5,409.8145,785.5,419.8145,789.5,409.8145,785.5,413.8145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="988" x2="988" y1="392.748" y2="419.8145"/><polygon fill="#A80036" points="984,409.8145,988,419.8145,992,409.8145,988,413.8145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1209" x2="1209" y1="392.748" y2="419.8145"/><polygon fill="#A80036" points="1205,409.8145,1209,419.8145,1213,409.8145,1209,413.8145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1421.5" x2="1421.5" y1="392.748" y2="419.8145"/><polygon fill="#A80036" points="1417.5,409.8145,1421.5,419.8145,1425.5,409.8145,1421.5,413.8145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1590" x2="1590" y1="392.748" y2="412.748"/><polygon fill="#A80036" points="1586,402.748,1590,412.748,1594,402.748,1590,406.748" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="616.5" x2="616.5" y1="453.9473" y2="481.0137"/><polygon fill="#A80036" points="612.5,471.0137,616.5,481.0137,620.5,471.0137,616.5,475.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="785.5" x2="785.5" y1="453.9473" y2="481.0137"/><polygon fill="#A80036" points="781.5,471.0137,785.5,481.0137,789.5,471.0137,785.5,475.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="988" x2="988" y1="453.9473" y2="481.0137"/><polygon fill="#A80036" points="984,471.0137,988,481.0137,992,471.0137,988,475.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1209" x2="1209" y1="453.9473" y2="481.0137"/><polygon fill="#A80036" points="1205,471.0137,1209,481.0137,1213,471.0137,1209,475.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1421.5" x2="1421.5" y1="453.9473" y2="481.0137"/><polygon fill="#A80036" points="1417.5,471.0137,1421.5,481.0137,1425.5,471.0137,1421.5,475.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1590" x2="1590" y1="461.0137" y2="481.0137"/><polygon fill="#A80036" points="1586,471.0137,1590,481.0137,1594,471.0137,1590,475.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1107.5" x2="1107.5" y1="366.748" y2="386.748"/><polygon fill="#A80036" points="1103.5,376.748,1107.5,386.748,1111.5,376.748,1107.5,380.748" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1107.5" x2="1107.5" y1="487.0137" y2="507.0137"/><polygon fill="#A80036" points="1103.5,497.0137,1107.5,507.0137,1111.5,497.0137,1107.5,501.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="991" x2="991" y1="567.1465" y2="587.1465"/><polygon fill="#A80036" points="987,577.1465,991,587.1465,995,577.1465,991,581.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1236" x2="1236" y1="567.1465" y2="587.1465"/><polygon fill="#A80036" points="1232,577.1465,1236,587.1465,1240,577.1465,1236,581.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="991" x2="991" y1="621.2793" y2="641.2793"/><polygon fill="#A80036" points="987,631.2793,991,641.2793,995,631.2793,991,635.2793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1236" x2="1236" y1="621.2793" y2="641.2793"/><polygon fill="#A80036" points="1232,631.2793,1236,641.2793,1240,631.2793,1236,635.2793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1107.5" x2="1107.5" y1="541.1465" y2="561.1465"/><polygon fill="#A80036" points="1103.5,551.1465,1107.5,561.1465,1111.5,551.1465,1107.5,555.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="796.166" y2="816.166"/><polygon fill="#A80036" points="1813.5,806.166,1817.5,816.166,1821.5,806.166,1817.5,810.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="850.2988" y2="871.1982"/><polygon fill="#A80036" points="1813.5,861.1982,1817.5,871.1982,1821.5,861.1982,1817.5,865.1982" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="905.3311" y2="937.1299"/><polygon fill="#A80036" points="1813.5,927.1299,1817.5,937.1299,1821.5,927.1299,1817.5,931.1299" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="971.2627" y2="1002.1621"/><polygon fill="#A80036" points="1813.5,992.1621,1817.5,1002.1621,1821.5,992.1621,1817.5,996.1621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="1036.2949" y2="1056.2949"/><polygon fill="#A80036" points="1813.5,1046.2949,1817.5,1056.2949,1821.5,1046.2949,1817.5,1050.2949" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="1090.4277" y2="1122.2266"/><polygon fill="#A80036" points="1813.5,1112.2266,1817.5,1122.2266,1821.5,1112.2266,1817.5,1116.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="1156.3594" y2="1195.8135"/><polygon fill="#A80036" points="1813.5,1185.8135,1817.5,1195.8135,1821.5,1185.8135,1817.5,1189.8135" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="701.4121" y2="747.9004"/><polygon fill="#A80036" points="1813.5,737.9004,1817.5,747.9004,1821.5,737.9004,1817.5,741.9004" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2392" x2="2392" y1="1306.9785" y2="1327.8779"/><polygon fill="#A80036" points="2388,1317.8779,2392,1327.8779,2396,1317.8779,2392,1321.8779" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2392" x2="2392" y1="1362.0107" y2="1392.9102"/><polygon fill="#A80036" points="2388,1382.9102,2392,1392.9102,2396,1382.9102,2392,1386.9102" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2806" x2="2806" y1="1526.0859" y2="1564.6406"/><polygon fill="#A80036" points="2802,1554.6406,2806,1564.6406,2810,1554.6406,2806,1558.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2806" x2="2806" y1="1598.7734" y2="1619.6729"/><polygon fill="#A80036" points="2802,1609.6729,2806,1619.6729,2810,1609.6729,2806,1613.6729" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2806" x2="2806" y1="1653.8057" y2="1684.7051"/><polygon fill="#A80036" points="2802,1674.7051,2806,1684.7051,2810,1674.7051,2806,1678.7051" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3378.5" x2="3378.5" y1="1745.7373" y2="1823.4678"/><polygon fill="#A80036" points="3374.5,1813.4678,3378.5,1823.4678,3382.5,1813.4678,3378.5,1817.4678" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3378.5" x2="3378.5" y1="1857.6006" y2="1926.4658"/><polygon fill="#A80036" points="3374.5,1916.4658,3378.5,1926.4658,3382.5,1916.4658,3378.5,1920.4658" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3885.5" x2="3885.5" y1="1779.6025" y2="1812.5684"/><polygon fill="#A80036" points="3881.5,1802.5684,3885.5,1812.5684,3889.5,1802.5684,3885.5,1806.5684" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3885.5" x2="3885.5" y1="1846.7012" y2="1881.7012"/><polygon fill="#A80036" points="3881.5,1871.7012,3885.5,1881.7012,3889.5,1871.7012,3885.5,1875.7012" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4138.5" x2="4138.5" y1="1779.6025" y2="1812.5684"/><polygon fill="#A80036" points="4134.5,1802.5684,4138.5,1812.5684,4142.5,1802.5684,4138.5,1806.5684" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4138.5" x2="4138.5" y1="1846.7012" y2="1881.7012"/><polygon fill="#A80036" points="4134.5,1871.7012,4138.5,1881.7012,4142.5,1871.7012,4138.5,1875.7012" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4819.5" x2="4819.5" y1="1829.6348" y2="1980.5986"/><polygon fill="#A80036" points="4815.5,1970.5986,4819.5,1980.5986,4823.5,1970.5986,4819.5,1974.5986" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="1986.5986" y2="2015.1533"/><polygon fill="#A80036" points="4411.5,2005.1533,4415.5,2015.1533,4419.5,2005.1533,4415.5,2009.1533" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="2049.2861" y2="2088.7402"/><polygon fill="#A80036" points="4411.5,2078.7402,4415.5,2088.7402,4419.5,2078.7402,4415.5,2082.7402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="2122.873" y2="2154.6719"/><polygon fill="#A80036" points="4411.5,2144.6719,4415.5,2154.6719,4419.5,2144.6719,4415.5,2148.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="2188.8047" y2="2235.9141"/><polygon fill="#A80036" points="4411.5,2225.9141,4415.5,2235.9141,4419.5,2225.9141,4415.5,2229.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="2270.0469" y2="2316.2568"/><polygon fill="#A80036" points="4411.5,2306.2568,4415.5,2316.2568,4419.5,2306.2568,4415.5,2310.2568" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="2350.3896" y2="2370.3896"/><polygon fill="#A80036" points="4411.5,2360.3896,4415.5,2370.3896,4419.5,2360.3896,4415.5,2364.3896" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5465.5" x2="5181.5" y1="2709.9404" y2="2709.9404"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5181.5" x2="5181.5" y1="2709.9404" y2="2745.1846"/><polygon fill="#A80036" points="5177.5,2735.1846,5181.5,2745.1846,5185.5,2735.1846,5181.5,2739.1846" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="5525" y1="2651.7305" y2="2697.9404"/><polygon fill="#A80036" points="5521,2687.9404,5525,2697.9404,5529,2687.9404,5525,2691.9404" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="5525" y1="2581.3877" y2="2617.5977"/><polygon fill="#A80036" points="5521,2607.5977,5525,2617.5977,5529,2607.5977,5525,2611.5977" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="5525" y1="2534.1436" y2="2557.3877"/><polygon fill="#A80036" points="5521,2547.3877,5525,2557.3877,5529,2547.3877,5525,2551.3877" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6113" x2="6113" y1="2892.1484" y2="2987.2236"/><polygon fill="#A80036" points="6109,2977.2236,6113,2987.2236,6117,2977.2236,6113,2981.2236" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6113" x2="6113" y1="3021.3564" y2="3108.7764"/><polygon fill="#A80036" points="6109,3098.7764,6113,3108.7764,6117,3098.7764,6113,3102.7764" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6708" x2="6708" y1="2944.5684" y2="2979.5684"/><polygon fill="#A80036" points="6704,2969.5684,6708,2979.5684,6712,2969.5684,6708,2973.5684" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6708" x2="6708" y1="3013.7012" y2="3048.7012"/><polygon fill="#A80036" points="6704,3038.7012,6708,3048.7012,6712,3038.7012,6708,3042.7012" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7452.5" x2="7452.5" y1="2944.5684" y2="2979.5684"/><polygon fill="#A80036" points="7448.5,2969.5684,7452.5,2979.5684,7456.5,2969.5684,7452.5,2973.5684" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7452.5" x2="7452.5" y1="3013.7012" y2="3048.7012"/><polygon fill="#A80036" points="7448.5,3038.7012,7452.5,3048.7012,7456.5,3038.7012,7452.5,3042.7012" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7452.5" x2="7452.5" y1="3082.834" y2="3181.4639"/><polygon fill="#A80036" points="7448.5,3171.4639,7452.5,3181.4639,7456.5,3171.4639,7452.5,3175.4639" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3187.4639" y2="3207.4639"/><polygon fill="#A80036" points="7016.5,3197.4639,7020.5,3207.4639,7024.5,3197.4639,7020.5,3201.4639" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3339.7295" y2="3359.7295"/><polygon fill="#A80036" points="7016.5,3349.7295,7020.5,3359.7295,7024.5,3349.7295,7020.5,3353.7295" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3393.8623" y2="3418.1182"/><polygon fill="#A80036" points="7016.5,3408.1182,7020.5,3418.1182,7024.5,3408.1182,7020.5,3412.1182" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3452.251" y2="3472.251"/><polygon fill="#A80036" points="7016.5,3462.251,7020.5,3472.251,7024.5,3462.251,7020.5,3466.251" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3285.5967" y2="3305.5967"/><polygon fill="#A80036" points="7016.5,3295.5967,7020.5,3305.5967,7024.5,3295.5967,7020.5,3299.5967" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7069.5" x2="7414.5" y1="3541.6279" y2="3541.6279"/><polygon fill="#A80036" points="7410.5,3413.8623,7414.5,3403.8623,7418.5,3413.8623,7414.5,3409.8623" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7414.5" x2="7414.5" y1="3273.5967" y2="3541.6279"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7414.5" x2="7032.5" y1="3273.5967" y2="3273.5967"/><polygon fill="#A80036" points="7042.5,3269.5967,7032.5,3273.5967,7042.5,3277.5967,7038.5,3273.5967" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3506.3838" y2="3529.6279"/><polygon fill="#A80036" points="7016.5,3519.6279,7020.5,3529.6279,7024.5,3519.6279,7020.5,3523.6279" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3241.5967" y2="3261.5967"/><polygon fill="#A80036" points="7016.5,3251.5967,7020.5,3261.5967,7024.5,3251.5967,7020.5,3255.5967" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3553.6279" y2="3594.9033"/><polygon fill="#A80036" points="7016.5,3584.9033,7020.5,3594.9033,7024.5,3584.9033,7020.5,3588.9033" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="7024.5" y="3575.083">no</text><line style="stroke:#A80036;stroke-width:1.5;" x1="7707.5" x2="7707.5" y1="2776.0732" y2="2802.5615"/><polygon fill="#A80036" points="7703.5,2792.5615,7707.5,2802.5615,7711.5,2792.5615,7707.5,2796.5615" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7707.5" x2="7707.5" y1="2836.6943" y2="2874.9385"/><polygon fill="#A80036" points="7703.5,2864.9385,7707.5,2874.9385,7711.5,2864.9385,7707.5,2868.9385" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="7364" y1="3792.4392" y2="3831.8933"/><polygon fill="#A80036" points="7360,3821.8933,7364,3831.8933,7368,3821.8933,7364,3825.8933" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="4022.1013" y2="4069.2107"/><polygon fill="#A80036" points="8188.75,4059.2107,8192.75,4069.2107,8196.75,4059.2107,8192.75,4063.2107" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="4103.3435" y2="4150.4529"/><polygon fill="#A80036" points="8188.75,4140.4529,8192.75,4150.4529,8196.75,4140.4529,8192.75,4144.4529" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8086" y1="4337.7507" y2="4357.7507"/><polygon fill="#A80036" points="8082,4347.7507,8086,4357.7507,8090,4347.7507,8086,4351.7507" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8086" y1="4391.8835" y2="4411.8835"/><polygon fill="#A80036" points="8082,4401.8835,8086,4411.8835,8090,4401.8835,8086,4405.8835" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8086" y1="4273.4851" y2="4303.6179"/><polygon fill="#A80036" points="8082,4293.6179,8086,4303.6179,8090,4293.6179,8086,4297.6179" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8133.5" x2="8178.5" y1="4478.0164" y2="4478.0164"/><polygon fill="#A80036" points="8174.5,4384.8171,8178.5,4374.8171,8182.5,4384.8171,8178.5,4380.8171" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8178.5" x2="8178.5" y1="4261.4851" y2="4478.0164"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8178.5" x2="8098" y1="4261.4851" y2="4261.4851"/><polygon fill="#A80036" points="8108,4257.4851,8098,4261.4851,8108,4265.4851,8104,4261.4851" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8086" y1="4446.0164" y2="4466.0164"/><polygon fill="#A80036" points="8082,4456.0164,8086,4466.0164,8090,4456.0164,8086,4460.0164" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8151.25" x2="8086" y1="4227.4851" y2="4227.4851"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8086" y1="4227.4851" y2="4249.4851"/><polygon fill="#A80036" points="8082,4239.4851,8086,4249.4851,8090,4239.4851,8086,4243.4851" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8234.25" x2="8299.5" y1="4227.4851" y2="4227.4851"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8299.5" x2="8299.5" y1="4227.4851" y2="4249.4851"/><polygon fill="#A80036" points="8295.5,4239.4851,8299.5,4249.4851,8303.5,4239.4851,8299.5,4243.4851" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8086" y1="4490.0164" y2="4508.0164"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8086" x2="8180.75" y1="4508.0164" y2="4508.0164"/><polygon fill="#A80036" points="8170.75,4504.0164,8180.75,4508.0164,8170.75,4512.0164,8174.75,4508.0164" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8299.5" x2="8299.5" y1="4283.6179" y2="4508.0164"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8299.5" x2="8204.75" y1="4508.0164" y2="4508.0164"/><polygon fill="#A80036" points="8214.75,4504.0164,8204.75,4508.0164,8214.75,4512.0164,8210.75,4508.0164" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="4184.5857" y2="4215.4851"/><polygon fill="#A80036" points="8188.75,4205.4851,8192.75,4215.4851,8196.75,4205.4851,8192.75,4209.4851" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="4520.0164" y2="4540.9158"/><polygon fill="#A80036" points="8188.75,4530.9158,8192.75,4540.9158,8196.75,4530.9158,8192.75,4534.9158" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="4575.0486" y2="4605.948"/><polygon fill="#A80036" points="8188.75,4595.948,8192.75,4605.948,8196.75,4595.948,8192.75,4599.948" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8409.5" x2="8192.75" y1="3955.0691" y2="3955.0691"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="3955.0691" y2="3987.9685"/><polygon fill="#A80036" points="8188.75,3977.9685,8192.75,3987.9685,8196.75,3977.9685,8192.75,3981.9685" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8522.5" x2="8729.25" y1="3955.0691" y2="3955.0691"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8729.25" x2="8729.25" y1="3955.0691" y2="3980.3132"/><polygon fill="#A80036" points="8725.25,3970.3132,8729.25,3980.3132,8733.25,3970.3132,8729.25,3974.3132" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8192.75" y1="4640.0808" y2="4658.0808"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8192.75" x2="8454" y1="4658.0808" y2="4658.0808"/><polygon fill="#A80036" points="8444,4654.0808,8454,4658.0808,8444,4662.0808,8448,4658.0808" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8729.25" x2="8729.25" y1="4014.446" y2="4658.0808"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8729.25" x2="8478" y1="4658.0808" y2="4658.0808"/><polygon fill="#A80036" points="8488,4654.0808,8478,4658.0808,8488,4662.0808,8484,4658.0808" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="9175.25" x2="9175.25" y1="4827.8435" y2="4951.5056"/><polygon fill="#A80036" points="9171.25,4941.5056,9175.25,4951.5056,9179.25,4941.5056,9175.25,4945.5056" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="9175.25" x2="9175.25" y1="4985.6384" y2="5047.1589"/><polygon fill="#A80036" points="9171.25,5037.1589,9175.25,5047.1589,9179.25,5037.1589,9175.25,5041.1589" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="312.6152" y2="317.6152"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="1107.5" y1="317.6152" y2="317.6152"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1107.5" x2="1107.5" y1="317.6152" y2="332.6152"/><polygon fill="#A80036" points="1103.5,322.6152,1107.5,332.6152,1111.5,322.6152,1107.5,326.6152" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1107.5" x2="1107.5" y1="647.2793" y2="652.2793"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1107.5" x2="1817.5" y1="652.2793" y2="652.2793"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="652.2793" y2="667.2793"/><polygon fill="#A80036" points="1813.5,657.2793,1817.5,667.2793,1821.5,657.2793,1817.5,661.2793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="1817.5" y1="1229.9463" y2="1254.896"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1817.5" x2="2392" y1="1254.896" y2="1254.896"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2392" x2="2392" y1="1254.896" y2="1272.8457"/><polygon fill="#A80036" points="2388,1262.8457,2392,1272.8457,2396,1262.8457,2392,1266.8457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2659.5" x2="2659.5" y1="1690.7051" y2="1694.7051"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2659.5" x2="3378.5" y1="1694.7051" y2="1694.7051"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3378.5" x2="3378.5" y1="1694.7051" y2="1711.6045"/><polygon fill="#A80036" points="3374.5,1701.6045,3378.5,1711.6045,3382.5,1701.6045,3378.5,1705.6045" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2927" x2="2927" y1="1690.7051" y2="1694.7051"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2927" x2="3885.5" y1="1694.7051" y2="1694.7051"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3885.5" x2="3885.5" y1="1694.7051" y2="1745.4697"/><polygon fill="#A80036" points="3881.5,1735.4697,3885.5,1745.4697,3889.5,1735.4697,3885.5,1739.4697" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3157" x2="3157" y1="1690.7051" y2="1694.7051"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3157" x2="4138.5" y1="1694.7051" y2="1694.7051"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4138.5" x2="4138.5" y1="1694.7051" y2="1745.4697"/><polygon fill="#A80036" points="4134.5,1735.4697,4138.5,1745.4697,4142.5,1735.4697,4138.5,1739.4697" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3378.5" x2="3378.5" y1="1960.5986" y2="1966.5986"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3378.5" x2="4284.5" y1="1966.5986" y2="1966.5986"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4284.5" x2="4284.5" y1="1966.5986" y2="1980.5986"/><polygon fill="#A80036" points="4280.5,1970.5986,4284.5,1980.5986,4288.5,1970.5986,4284.5,1974.5986" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3885.5" x2="3885.5" y1="1915.834" y2="1966.5986"/><line style="stroke:#A80036;stroke-width:1.5;" x1="3885.5" x2="4536.5" y1="1966.5986" y2="1966.5986"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4536.5" x2="4536.5" y1="1966.5986" y2="1980.5986"/><polygon fill="#A80036" points="4532.5,1970.5986,4536.5,1980.5986,4540.5,1970.5986,4536.5,1974.5986" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4138.5" x2="4138.5" y1="1915.834" y2="1966.5986"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4138.5" x2="4766.5" y1="1966.5986" y2="1966.5986"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4766.5" x2="4766.5" y1="1966.5986" y2="1980.5986"/><polygon fill="#A80036" points="4762.5,1970.5986,4766.5,1980.5986,4770.5,1970.5986,4766.5,1974.5986" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2330" x2="2318" y1="1404.9102" y2="1404.9102"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2318" x2="2318" y1="1404.9102" y2="1422.9102"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2318" x2="2806" y1="1422.9102" y2="1422.9102"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2806" x2="2806" y1="1422.9102" y2="1491.9531"/><polygon fill="#A80036" points="2802,1481.9531,2806,1491.9531,2810,1481.9531,2806,1485.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2454" x2="4964.5" y1="1404.9102" y2="1404.9102"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4964.5" x2="4964.5" y1="1404.9102" y2="1436.9102"/><polygon fill="#A80036" points="4960.5,1426.9102,4964.5,1436.9102,4968.5,1426.9102,4964.5,1430.9102" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="4415.5" y1="2404.5225" y2="2420.5225"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4415.5" x2="2362" y1="2420.5225" y2="2420.5225"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2362" x2="2362" y1="2420.5225" y2="2438.5225"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2362" x2="2380" y1="2438.5225" y2="2438.5225"/><polygon fill="#A80036" points="2370,2434.5225,2380,2438.5225,2370,2442.5225,2374,2438.5225" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4964.5" x2="4964.5" y1="1471.043" y2="2438.5225"/><line style="stroke:#A80036;stroke-width:1.5;" x1="4964.5" x2="2404" y1="2438.5225" y2="2438.5225"/><polygon fill="#A80036" points="2414,2434.5225,2404,2438.5225,2414,2442.5225,2410,2438.5225" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5916" x2="5916" y1="2811.8057" y2="2815.8057"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5916" x2="6113" y1="2815.8057" y2="2815.8057"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6113" x2="6113" y1="2815.8057" y2="2858.0156"/><polygon fill="#A80036" points="6109,2848.0156,6113,2858.0156,6117,2848.0156,6113,2852.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5934" x2="5934" y1="2811.8057" y2="2815.8057"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5934" x2="6708" y1="2815.8057" y2="2815.8057"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6708" x2="6708" y1="2815.8057" y2="2910.4355"/><polygon fill="#A80036" points="6704,2900.4355,6708,2910.4355,6712,2900.4355,6708,2904.4355" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5934" x2="5934" y1="2811.8057" y2="2815.8057"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5934" x2="7452.5" y1="2815.8057" y2="2815.8057"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7452.5" x2="7452.5" y1="2815.8057" y2="2910.4355"/><polygon fill="#A80036" points="7448.5,2900.4355,7452.5,2910.4355,7456.5,2900.4355,7452.5,2904.4355" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6113" x2="6113" y1="3142.9092" y2="3167.4639"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6113" x2="6898" y1="3167.4639" y2="3167.4639"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6898" x2="6898" y1="3167.4639" y2="3181.4639"/><polygon fill="#A80036" points="6894,3171.4639,6898,3181.4639,6902,3171.4639,6898,3175.4639" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6708" x2="6708" y1="3082.834" y2="3167.4639"/><line style="stroke:#A80036;stroke-width:1.5;" x1="6708" x2="7160.5" y1="3167.4639" y2="3167.4639"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7160.5" x2="7160.5" y1="3167.4639" y2="3181.4639"/><polygon fill="#A80036" points="7156.5,3171.4639,7160.5,3181.4639,7164.5,3171.4639,7160.5,3175.4639" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5181.5" x2="5181.5" y1="2779.3174" y2="2787.5615"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5181.5" x2="5925" y1="2787.5615" y2="2787.5615"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5925" x2="5925" y1="2787.5615" y2="2805.8057"/><polygon fill="#A80036" points="5921,2795.8057,5925,2805.8057,5929,2795.8057,5925,2799.8057" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5584.5" x2="7707.5" y1="2709.9404" y2="2709.9404"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7707.5" x2="7707.5" y1="2709.9404" y2="2741.9404"/><polygon fill="#A80036" points="7703.5,2731.9404,7707.5,2741.9404,7711.5,2731.9404,7707.5,2735.9404" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7020.5" y1="3629.0361" y2="3634.0361"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7020.5" x2="7364" y1="3634.0361" y2="3634.0361"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="7364" y1="3634.0361" y2="3649.0361"/><polygon fill="#A80036" points="7360,3639.0361,7364,3649.0361,7368,3639.0361,7364,3643.0361" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7427.5" x2="8097.5" y1="3661.0361" y2="3661.0361"/><polygon fill="#A80036" points="8093.5,3183.168,8097.5,3173.168,8101.5,3183.168,8097.5,3179.168" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8097.5" x2="8097.5" y1="2569.3877" y2="3661.0361"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8097.5" x2="5537" y1="2569.3877" y2="2569.3877"/><polygon fill="#A80036" points="5547,2565.3877,5537,2569.3877,5547,2573.3877,5543,2569.3877" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="7364" y1="3673.0361" y2="3678.0361"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="5525" y1="3678.0361" y2="3678.0361"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="5525" y1="3678.0361" y2="3693.0361"/><polygon fill="#A80036" points="5521,3683.0361,5525,3693.0361,5529,3683.0361,5525,3687.0361" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="5525" y1="3717.0361" y2="3742.407"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="7364" y1="3742.407" y2="3742.407"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="7364" y1="3742.407" y2="3758.3064"/><polygon fill="#A80036" points="7360,3748.3064,7364,3758.3064,7368,3748.3064,7364,3752.3064" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="5529" y="3735.907">no</text><line style="stroke:#A80036;stroke-width:1.5;" x1="2392" x2="2392" y1="2450.5225" y2="2462.8887"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2392" x2="5525" y1="2462.8887" y2="2462.8887"/><line style="stroke:#A80036;stroke-width:1.5;" x1="5525" x2="5525" y1="2462.8887" y2="2500.0107"/><polygon fill="#A80036" points="5521,2490.0107,5525,2500.0107,5529,2490.0107,5525,2494.0107" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="7364" y1="3866.0261" y2="3901.5808"/><line style="stroke:#A80036;stroke-width:1.5;" x1="7364" x2="8466" y1="3901.5808" y2="3901.5808"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8466" x2="8466" y1="3901.5808" y2="3943.0691"/><polygon fill="#A80036" points="8462,3933.0691,8466,3943.0691,8470,3933.0691,8466,3937.0691" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8466" x2="8466" y1="4670.0808" y2="4716.5691"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8466" x2="9175.25" y1="4716.5691" y2="4716.5691"/><line style="stroke:#A80036;stroke-width:1.5;" x1="9175.25" x2="9175.25" y1="4716.5691" y2="4793.7107"/><polygon fill="#A80036" points="9171.25,4783.7107,9175.25,4793.7107,9179.25,4783.7107,9175.25,4787.7107" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="9175.25" x2="9175.25" y1="5081.2917" y2="5098.2917"/><line style="stroke:#A80036;stroke-width:1.5;" x1="9175.25" x2="269" y1="5098.2917" y2="5098.2917"/><line style="stroke:#A80036;stroke-width:1.5;" x1="269" x2="269" y1="5098.2917" y2="5113.2917"/><polygon fill="#A80036" points="265,5103.2917,269,5113.2917,273,5103.2917,269,5107.2917" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="79" x="231.5" y="50.8984">CLI Layer</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="115" x="1052" y="50.8984">Data Loading</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="107" x="1934.25" y="50.8984">Initialization</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="142" x="2389" y="50.8984">Query Execution</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="288" x="2796" y="50.8984">Stage 1: PRIMER (Global Context)</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="116" x="3441.5" y="50.8984">Primer Fold 1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="116" x="3824" y="50.8984">Primer Fold 2</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="116" x="4077" y="50.8984">Primer Fold 3</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="120" x="4613.5" y="50.8984">... More Folds</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="302" x="5331.75" y="50.8984">Stage 2: ITERATIVE LOCAL SEARCH</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="195" x="5824" y="50.8984">Parallel Local Searches</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="192" x="6159" y="50.8984">Action 1: Local Search</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="192" x="6608.5" y="50.8984">Action 2: Local Search</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="192" x="7328.75" y="50.8984">Action 3: Local Search</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="201" x="8421.875" y="50.8984">Stage 3: REDUCE Phase</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="218" x="9261" y="50.8984">Stage 4: Result Assembly</text><!--MD5=[773390c0474e65fe7b54378a0dcccd64]
@startuml DRIFT Search Activity Diagram
title GraphRAG DRIFT Search - Detailed Activity Flow (Iterative Refinement)

|#AntiqueWhite|CLI Layer|
start
:User executes query\n""graphrag query 'Analyze X from multiple perspectives' - -method drift"";

:Parse CLI arguments;
note right
  - query string
  - root directory
  - data directory
  - response_type
  - streaming flag
end note

:Load configuration\n(settings.yaml);

|#LightBlue|Data Loading|
:Read Parquet files from output/;
fork
  :Load entities.parquet;
fork again
  :Load relationships.parquet;
fork again
  :Load communities.parquet;
fork again
  :Load community_reports.parquet;
fork again
  :Load text_units.parquet;
fork again
  :Load covariates.parquet\n(optional);
end fork

:Load embedding vector stores;
fork
  :Load entity_description embeddings;
fork again
  :Load text_unit_text embeddings;
end fork

|#LightGreen|Initialization|
:Create DRIFTSearch engine via factory;

partition "Factory Setup" {
  :Create completion model\n(LiteLLM);
  :Create embedding model;
  :Load DRIFT search prompts;
  note right
    - DRIFT_PRIMER_PROMPT
    - LOCAL_SEARCH_SYSTEM_PROMPT
    - DRIFT_REDUCE_PROMPT
  end note
  :Create DRIFTSearchContextBuilder;
  note right
    Combines:
    - GlobalCommunityContext
    - LocalSearchMixedContext
  end note
  :Create DRIFTPrimer;
  :Initialize LocalSearch engine;
  note right
    Reuses local search implementation
    with JSON response format
  end note
  :Initialize QueryState;
  note right
    Tracks:
    - Actions (query + answer pairs)
    - Follow-up queries
    - Token usage
  end note
  :Set DRIFT parameters;
  note right
    - n_depth: Iteration depth (default: 2)
    - drift_k_followups: Actions per iteration (default: 3)
    - primer_folds: Parallel primer calls (default: 10)
  end note
}

|#LightYellow|Query Execution|
:Start DRIFTSearch.search(query);

:Initialize token tracking;
note right
  llm_calls = {}
  prompt_tokens = {}
  output_tokens = {}
end note

if (QueryState empty?) then (yes)
  |#LightCoral|Stage 1: PRIMER (Global Context)|
  partition "Primer - Generate Initial Context" {
    :Build global context (community selection);
    note right
      Uses GlobalCommunityContext
      - Selects relevant community reports
      - Can use dynamic selection
      - Returns top-k reports
    end note

    :Track build_context tokens;

    :Split community reports into folds;
    note right
      Split into primer_folds (default: 10)
      Enables parallel processing
      Each fold gets subset of reports
    end note

    fork
      |#LightCoral|Primer Fold 1|
      :Format DRIFT_PRIMER_PROMPT;
      note right
        System: DRIFT_PRIMER_PROMPT
        - Query
        - Community reports for this fold
      end note

      :Call LLM with PrimerResponse format;
      note right
        Structured output:
        {
          "intermediate_answer": str,
          "score": int (0-100),
          "follow_up_queries": [str, ...]
        }
      end note

      :Parse PrimerResponse;

    fork again
      |#LightCoral|Primer Fold 2|
      :Format DRIFT_PRIMER_PROMPT;
      :Call LLM;
      :Parse PrimerResponse;

    fork again
      |#LightCoral|Primer Fold 3|
      :Format DRIFT_PRIMER_PROMPT;
      :Call LLM;
      :Parse PrimerResponse;

    fork again
      |#LightCoral|... More Folds|
      note right
        Total: primer_folds (default: 10)
        All executed in parallel
      end note
    end fork

    :Collect all primer responses;
    note right
      Each response contains:
      - intermediate_answer (2000 chars)
      - score (relevance 0-100)
      - follow_up_queries (5+)
    end note

    :Track primer tokens;
    note right
      llm_calls["primer"] = primer_folds
      prompt_tokens["primer"] = sum(all prompts)
      output_tokens["primer"] = sum(all outputs)
    end note

    :Process primer results;
    note right
      - Combine intermediate answers
      - Extract all follow-up queries
      - Calculate average score
    end note

    :Create initial DriftAction;
    note right
      DriftAction:
      - query: original query
      - answer: combined intermediate answers
      - score: average
      - follow_ups: list of follow-up queries
    end note

    :Add initial action to QueryState;
    :Add follow-ups to QueryState queue;
  }
else (no)
  :Skip primer (resume existing state);
endif

|#LightSteelBlue|Stage 2: ITERATIVE LOCAL SEARCH|
partition "Main DRIFT Loop" {
  :Initialize loop variables;
  note right
    epochs = 0
    n_depth = 2 (default)
  end note

  repeat
    :Rank incomplete actions;
    note right
      Sort by:
      1. Score (descending)
      2. Depth (prefer shallower)

      Selects actions that need answers
    end note

    if (Actions available?) then (yes)
      :Select top-k actions;
      note right
        k = drift_k_followups (default: 3)
        Limits concurrent searches
      end note

      |#LightSteelBlue|Parallel Local Searches|
      fork
        |#Lavender|Action 1: Local Search|
        :Execute LocalSearch for follow-up query 1;
        note right
          LocalSearch process:
          1. Entity mapping (vector search)
          2. Graph traversal
          3. Context building (multi-source)
          4. LLM generation with JSON response
        end note

        :Parse JSON response;
        note right
          Expected format:
          {
            "response": str,
            "score": float,
            "follow_up_queries": [str, ...]
          }
        end note

        :Update DriftAction;
        note right
          - Set answer
          - Set score
          - Extract new follow-ups
          - Track tokens
        end note

      fork again
        |#Lavender|Action 2: Local Search|
        :Execute LocalSearch for follow-up query 2;
        :Parse JSON response;
        :Update DriftAction;

      fork again
        |#Lavender|Action 3: Local Search|
        :Execute LocalSearch for follow-up query 3;
        :Parse JSON response;
        :Update DriftAction;
      end fork

      :Collect all action results;

      repeat
        :For each completed action;
        :Add action to QueryState;
        :Extract follow-up queries from action;
        :Add follow-ups to QueryState queue;
        note right
          New follow-ups become candidates
          for next iteration
        end note
      repeat while (More actions?) is (yes)
      -> no;

      :Increment epochs;

    else (no)
      :No more actions to process;
      :Exit DRIFT loop early;
      note right
        All queries answered or
        no viable follow-ups
      end note
      break
    endif

  repeat while (epochs < n_depth?) is (yes)
  -> no;

  :Calculate action token usage;
  note right
    llm_calls["action"] = sum(all local searches)
    prompt_tokens["action"] = sum(all prompts)
    output_tokens["action"] = sum(all outputs)
  end note

  :Serialize QueryState;
  note right
    Extract:
    - All answers (graph of responses)
    - Context data (entities, relationships, etc.)
    - Context text (formatted)
  end note
}

|#LightGoldenRodYellow|Stage 3: REDUCE Phase|
partition "Reduce - Synthesize Final Answer" {
  if (Reduce enabled?) then (yes)
    :Extract all answers from QueryState;
    note right
      Traverse query graph
      Collect all completed actions
      Format as list of answers
    end note

    :Build REDUCE prompt;
    note right
      DRIFT_REDUCE_PROMPT format:
      - System: Reduce instruction
      - Context: All intermediate answers
      - response_type parameter
      - User: Original query
    end note

    :Call LLM for synthesis;
    note right
      Model parameters:
      - reduce_temperature (from config)
      - reduce_max_completion_tokens
    end note

    if (Streaming?) then (yes)
      repeat
        :Receive token chunk;
        :Yield token to CLI;
        :Append to full_response;
      repeat while (More tokens?) is (yes)
      -> no;
    else (no)
      :Receive complete response;
    endif

    :Track reduce tokens;
    note right
      llm_calls["reduce"] = 1
      prompt_tokens["reduce"] = reduce prompt length
      output_tokens["reduce"] = response length
    end note

    :Store reduced response;

  else (no)
    :Return raw QueryState responses;
    note right
      No synthesis
      Returns all answers as-is
    end note
  endif
}

|#PaleGreen|Stage 4: Result Assembly|
partition "Create SearchResult" {
  :Assemble SearchResult object;
  note right
    SearchResult contains:
    - response: Final synthesized answer OR raw responses
    - context_data: Graph of all context used
    - context_text: Formatted context
    - completion_time: total duration (float)
    - llm_calls: build_context + primer + action + reduce
    - prompt_tokens: sum(all phases)
    - output_tokens: sum(all phases)
    - llm_calls_categories: per-phase breakdown
    - prompt_tokens_categories: per-phase breakdown
    - output_tokens_categories: per-phase breakdown
  end note

  :Calculate total statistics;
  note right
    Example breakdown:
    {
      "build_context": 0-100 (dynamic selection)
      "primer": 10 (primer_folds)
      "action": 6-20+ (local searches)
      "reduce": 1
    }
  end note

  :Return SearchResult to API layer;
}

|#AntiqueWhite|CLI Layer|
:Display answer to user;

if (Verbose flag?) then (yes)
  :Display statistics;
  note right
    - LLM calls: 17-130+ calls
      - build_context: 0-100
      - primer: 10
      - action: 6-20+
      - reduce: 1
    - Prompt tokens: X
    - Output tokens: Y
    - Total tokens: X + Y
    - Completion time: Z seconds
  end note
else (no)
  :Skip statistics;
endif

:Exit with success;
stop







@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 SGT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: SG
--></g></svg>